var varioSettings = {"Color":{"name":"Color","id":410372,"display_on_collection":false,"products":29,"values":{"product":{"display_option":"automated-variant-image-swatch","image_size":"50x","page":"Product Page","values":[{"name":"Black \/ Orange \/ Red","id":410373,"swatch_color":"#90a4ae","swatch_image":"","products":2},{"name":"Grey \/ Black \/ White","id":410374,"swatch_color":"#90a4ae","swatch_image":"","products":2},{"name":"Black","id":410398,"swatch_color":"#000000","swatch_image":"","products":18},{"name":"Navy","id":410399,"swatch_color":"#000080","swatch_image":"","products":4},{"name":"Charcoal-Black Triblend","id":410400,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"Athletic Heather","id":410401,"swatch_color":"#90a4ae","swatch_image":"","products":14},{"name":"White","id":410409,"swatch_color":"#FFFFFF","swatch_image":"","products":9},{"name":"Brown","id":410442,"swatch_color":"#A52A2A","swatch_image":"","products":11},{"name":"Heather Midnight Navy","id":410443,"swatch_color":"#90a4ae","swatch_image":"","products":13},{"name":"Heather Forest","id":410444,"swatch_color":"#90a4ae","swatch_image":"","products":11},{"name":"Dark Grey Heather","id":410445,"swatch_color":"#90a4ae","swatch_image":"","products":14},{"name":"Army","id":410446,"swatch_color":"#90a4ae","swatch_image":"","products":17},{"name":"Midnight Navy","id":410946,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"Royal Blue","id":410947,"swatch_color":"#4169E1","swatch_image":"","products":1},{"name":"Red","id":410948,"swatch_color":"#FF0000","swatch_image":"","products":2},{"name":"Black Heather","id":517772,"swatch_color":"#90a4ae","swatch_image":"","products":8},{"name":"Dark Heather","id":517773,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"Irish Green","id":517774,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"True Royal","id":517775,"swatch_color":"#90a4ae","swatch_image":"","products":5},{"name":"Heather Grey","id":517776,"swatch_color":"#90a4ae","swatch_image":"","products":3},{"name":"Carbon Grey","id":517786,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"Burnt Orange","id":517791,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"Pink","id":517792,"swatch_color":"#FFC0CB","swatch_image":"","products":1},{"name":"Heather True Royal","id":517793,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"Yellow","id":517794,"swatch_color":"#FFFF00","swatch_image":"","products":1}]}}},"Size":{"name":"Size","id":410402,"display_on_collection":false,"products":36,"values":{"product":{"display_option":"button","image_size":"50x","page":"Product Page","values":[{"name":"XS","id":410403,"swatch_color":"#90a4ae","swatch_image":"","products":31},{"name":"S","id":410404,"swatch_color":"#90a4ae","swatch_image":"","products":36},{"name":"M","id":410405,"swatch_color":"#90a4ae","swatch_image":"","products":36},{"name":"L","id":410406,"swatch_color":"#90a4ae","swatch_image":"","products":36},{"name":"XL","id":410407,"swatch_color":"#90a4ae","swatch_image":"","products":36},{"name":"2XL","id":410408,"swatch_color":"#90a4ae","swatch_image":"","products":36},{"name":"3XL","id":410410,"swatch_color":"#90a4ae","swatch_image":"","products":32},{"name":"4XL","id":410411,"swatch_color":"#90a4ae","swatch_image":"","products":28},{"name":"5XL","id":410412,"swatch_color":"#90a4ae","swatch_image":"","products":28}]}}},"Material":{"name":"Material","id":517777,"display_on_collection":false,"products":1,"values":{"product":{"display_option":"button","image_size":"50x","page":"Product Page","values":[{"name":"Cherry","id":517778,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"Walnut","id":517779,"swatch_color":"#90a4ae","swatch_image":"","products":1}]}}},"Denominations":{"name":"Denominations","id":517780,"display_on_collection":false,"products":1,"values":{"product":{"display_option":"button","image_size":"50x","page":"Product Page","values":[{"name":"$25.00","id":517781,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"$50.00","id":517782,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"$75.00","id":517783,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"$100.00","id":517784,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"$150.00","id":517785,"swatch_color":"#90a4ae","swatch_image":"","products":1}]}}},"Quantity":{"name":"Quantity","id":517787,"display_on_collection":false,"products":2,"values":{"product":{"display_option":"button","image_size":"50x","page":"Product Page","values":[{"name":"Singe Rub","id":517788,"swatch_color":"#90a4ae","swatch_image":"","products":1},{"name":"3-Pack","id":517789,"swatch_color":"#90a4ae","swatch_image":"","products":2},{"name":"Single Rub","id":517790,"swatch_color":"#90a4ae","swatch_image":"","products":1}]}}}};var varioCustomizer = {"swatches":{"size":"large","style":"circle","border_color":{"normal":"#e4e4e4","active":"#4f5354"},"hover_effect":"none","image_position":"fit","border_style":"single","border_inner_color":{"normal":"#fff","active":"#fff"}},"sold_out":{"show_sold_out_variants":true,"style":"cross","hide_style":"automatic"},"collection":{"image_size":240,"swatch_size":"medium","show_label":true,"limit_swatches":false,"number_of_swatches":0,"number_of_buttons":0,"plus_button_action":"do_nothing"}};var VarioCurrencyFormat = '${{amount}}';(()=>{"use strict";function e(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function t(t){return t instanceof e(t).Element||t instanceof Element}function r(t){return t instanceof e(t).HTMLElement||t instanceof HTMLElement}function i(t){return"undefined"!=typeof ShadowRoot&&(t instanceof e(t).ShadowRoot||t instanceof ShadowRoot)}var n=Math.max,o=Math.min,s=Math.round;function a(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function c(){return!/^((?!chrome|android).)*safari/i.test(a())}function l(i,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var a=i.getBoundingClientRect(),l=1,u=1;n&&r(i)&&(l=i.offsetWidth>0&&s(a.width)/i.offsetWidth||1,u=i.offsetHeight>0&&s(a.height)/i.offsetHeight||1);var d=(t(i)?e(i):window).visualViewport,p=!c()&&o,h=(a.left+(p&&d?d.offsetLeft:0))/l,f=(a.top+(p&&d?d.offsetTop:0))/u,m=a.width/l,g=a.height/u;return{width:m,height:g,top:f,right:h+m,bottom:f+g,left:h,x:h,y:f}}function u(t){var r=e(t);return{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function d(e){return e?(e.nodeName||"").toLowerCase():null}function p(e){return((t(e)?e.ownerDocument:e.document)||window.document).documentElement}function h(e){return l(p(e)).left+u(e).scrollLeft}function f(t){return e(t).getComputedStyle(t)}function m(e){var t=f(e),r=t.overflow,i=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+i)}function g(t,i,n){void 0===n&&(n=!1);var o,a,c=r(i),f=r(i)&&function(e){var t=e.getBoundingClientRect(),r=s(t.width)/e.offsetWidth||1,i=s(t.height)/e.offsetHeight||1;return 1!==r||1!==i}(i),g=p(i),v=l(t,f,n),y={scrollLeft:0,scrollTop:0},w={x:0,y:0};return(c||!c&&!n)&&(("body"!==d(i)||m(g))&&(y=(o=i)!==e(o)&&r(o)?{scrollLeft:(a=o).scrollLeft,scrollTop:a.scrollTop}:u(o)),r(i)?((w=l(i,!0)).x+=i.clientLeft,w.y+=i.clientTop):g&&(w.x=h(g))),{x:v.left+y.scrollLeft-w.x,y:v.top+y.scrollTop-w.y,width:v.width,height:v.height}}function v(e){var t=l(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function y(e){return"html"===d(e)?e:e.assignedSlot||e.parentNode||(i(e)?e.host:null)||p(e)}function w(e){return["html","body","#document"].indexOf(d(e))>=0?e.ownerDocument.body:r(e)&&m(e)?e:w(y(e))}function b(t,r){var i;void 0===r&&(r=[]);var n=w(t),o=n===(null==(i=t.ownerDocument)?void 0:i.body),s=e(n),a=o?[s].concat(s.visualViewport||[],m(n)?n:[]):n,c=r.concat(a);return o?c:c.concat(b(y(a)))}function _(e){return["table","td","th"].indexOf(d(e))>=0}function S(e){return r(e)&&"fixed"!==f(e).position?e.offsetParent:null}function k(t){for(var n=e(t),o=S(t);o&&_(o)&&"static"===f(o).position;)o=S(o);return o&&("html"===d(o)||"body"===d(o)&&"static"===f(o).position)?n:o||function(e){var t=/firefox/i.test(a());if(/Trident/i.test(a())&&r(e)&&"fixed"===f(e).position)return null;var n=y(e);for(i(n)&&(n=n.host);r(n)&&["html","body"].indexOf(d(n))<0;){var o=f(n);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return n;n=n.parentNode}return null}(t)||n}var x="top",T="bottom",q="right",O="left",E="auto",L=[x,T,q,O],j="start",P="end",A="clippingParents",N="viewport",F="popper",R="reference",C=L.reduce((function(e,t){return e.concat([t+"-"+j,t+"-"+P])}),[]),D=[].concat(L,[E]).reduce((function(e,t){return e.concat([t,t+"-"+j,t+"-"+P])}),[]),M=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function z(e){var t=new Map,r=new Set,i=[];function n(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!r.has(e)){var i=t.get(e);i&&n(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){r.has(e.name)||n(e)})),i}var V={placement:"bottom",modifiers:[],strategy:"absolute"};function B(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function I(e){void 0===e&&(e={});var r=e,i=r.defaultModifiers,n=void 0===i?[]:i,o=r.defaultOptions,s=void 0===o?V:o;return function(e,r,i){void 0===i&&(i=s);var o,a,c={placement:"bottom",orderedModifiers:[],options:Object.assign({},V,s),modifiersData:{},elements:{reference:e,popper:r},attributes:{},styles:{}},l=[],u=!1,d={state:c,setOptions:function(i){var o="function"==typeof i?i(c.options):i;p(),c.options=Object.assign({},s,c.options,o),c.scrollParents={reference:t(e)?b(e):e.contextElement?b(e.contextElement):[],popper:b(r)};var a=function(e){var t=z(e);return M.reduce((function(e,r){return e.concat(t.filter((function(e){return e.phase===r})))}),[])}(function(e){var t=e.reduce((function(e,t){var r=e[t.name];return e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(n,c.options.modifiers)));return c.orderedModifiers=a.filter((function(e){return e.enabled})),c.orderedModifiers.forEach((function(e){var t=e.name,r=e.options,i=void 0===r?{}:r,n=e.effect;if("function"==typeof n){var o=n({state:c,name:t,instance:d,options:i}),s=function(){};l.push(o||s)}})),d.update()},forceUpdate:function(){if(!u){var e=c.elements,t=e.reference,r=e.popper;if(B(t,r)){c.rects={reference:g(t,k(r),"fixed"===c.options.strategy),popper:v(r)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach((function(e){return c.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<c.orderedModifiers.length;i++)if(!0!==c.reset){var n=c.orderedModifiers[i],o=n.fn,s=n.options,a=void 0===s?{}:s,l=n.name;"function"==typeof o&&(c=o({state:c,options:a,name:l,instance:d})||c)}else c.reset=!1,i=-1}}},update:(o=function(){return new Promise((function(e){d.forceUpdate(),e(c)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(o())}))}))),a}),destroy:function(){p(),u=!0}};if(!B(e,r))return d;function p(){l.forEach((function(e){return e()})),l=[]}return d.setOptions(i).then((function(e){!u&&i.onFirstUpdate&&i.onFirstUpdate(e)})),d}}var $={passive:!0};function H(e){return e.split("-")[0]}function W(e){return e.split("-")[1]}function U(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function J(e){var t,r=e.reference,i=e.element,n=e.placement,o=n?H(n):null,s=n?W(n):null,a=r.x+r.width/2-i.width/2,c=r.y+r.height/2-i.height/2;switch(o){case x:t={x:a,y:r.y-i.height};break;case T:t={x:a,y:r.y+r.height};break;case q:t={x:r.x+r.width,y:c};break;case O:t={x:r.x-i.width,y:c};break;default:t={x:r.x,y:r.y}}var l=o?U(o):null;if(null!=l){var u="y"===l?"height":"width";switch(s){case j:t[l]=t[l]-(r[u]/2-i[u]/2);break;case P:t[l]=t[l]+(r[u]/2-i[u]/2)}}return t}var Y={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Q(t){var r,i=t.popper,n=t.popperRect,o=t.placement,a=t.variation,c=t.offsets,l=t.position,u=t.gpuAcceleration,d=t.adaptive,h=t.roundOffsets,m=t.isFixed,g=c.x,v=void 0===g?0:g,y=c.y,w=void 0===y?0:y,b="function"==typeof h?h({x:v,y:w}):{x:v,y:w};v=b.x,w=b.y;var _=c.hasOwnProperty("x"),S=c.hasOwnProperty("y"),E=O,L=x,j=window;if(d){var A=k(i),N="clientHeight",F="clientWidth";if(A===e(i)&&"static"!==f(A=p(i)).position&&"absolute"===l&&(N="scrollHeight",F="scrollWidth"),o===x||(o===O||o===q)&&a===P)L=T,w-=(m&&A===j&&j.visualViewport?j.visualViewport.height:A[N])-n.height,w*=u?1:-1;if(o===O||(o===x||o===T)&&a===P)E=q,v-=(m&&A===j&&j.visualViewport?j.visualViewport.width:A[F])-n.width,v*=u?1:-1}var R,C=Object.assign({position:l},d&&Y),D=!0===h?function(e){var t=e.x,r=e.y,i=window.devicePixelRatio||1;return{x:s(t*i)/i||0,y:s(r*i)/i||0}}({x:v,y:w}):{x:v,y:w};return v=D.x,w=D.y,u?Object.assign({},C,((R={})[L]=S?"0":"",R[E]=_?"0":"",R.transform=(j.devicePixelRatio||1)<=1?"translate("+v+"px, "+w+"px)":"translate3d("+v+"px, "+w+"px, 0)",R)):Object.assign({},C,((r={})[L]=S?w+"px":"",r[E]=_?v+"px":"",r.transform="",r))}const X={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,r=e.options,i=e.name,n=r.offset,o=void 0===n?[0,0]:n,s=D.reduce((function(e,r){return e[r]=function(e,t,r){var i=H(e),n=[O,x].indexOf(i)>=0?-1:1,o="function"==typeof r?r(Object.assign({},t,{placement:e})):r,s=o[0],a=o[1];return s=s||0,a=(a||0)*n,[O,q].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(r,t.rects,o),e}),{}),a=s[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[i]=s}};var G={left:"right",right:"left",bottom:"top",top:"bottom"};function Z(e){return e.replace(/left|right|bottom|top/g,(function(e){return G[e]}))}var K={start:"end",end:"start"};function ee(e){return e.replace(/start|end/g,(function(e){return K[e]}))}function te(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&i(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function re(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ie(r,i,o){return i===N?re(function(t,r){var i=e(t),n=p(t),o=i.visualViewport,s=n.clientWidth,a=n.clientHeight,l=0,u=0;if(o){s=o.width,a=o.height;var d=c();(d||!d&&"fixed"===r)&&(l=o.offsetLeft,u=o.offsetTop)}return{width:s,height:a,x:l+h(t),y:u}}(r,o)):t(i)?function(e,t){var r=l(e,!1,"fixed"===t);return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}(i,o):re(function(e){var t,r=p(e),i=u(e),o=null==(t=e.ownerDocument)?void 0:t.body,s=n(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=n(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),c=-i.scrollLeft+h(e),l=-i.scrollTop;return"rtl"===f(o||r).direction&&(c+=n(r.clientWidth,o?o.clientWidth:0)-s),{width:s,height:a,x:c,y:l}}(p(r)))}function ne(e,i,s,a){var c="clippingParents"===i?function(e){var i=b(y(e)),n=["absolute","fixed"].indexOf(f(e).position)>=0&&r(e)?k(e):e;return t(n)?i.filter((function(e){return t(e)&&te(e,n)&&"body"!==d(e)})):[]}(e):[].concat(i),l=[].concat(c,[s]),u=l[0],p=l.reduce((function(t,r){var i=ie(e,r,a);return t.top=n(i.top,t.top),t.right=o(i.right,t.right),t.bottom=o(i.bottom,t.bottom),t.left=n(i.left,t.left),t}),ie(e,u,a));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function oe(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function se(e,t){return t.reduce((function(t,r){return t[r]=e,t}),{})}function ae(e,r){void 0===r&&(r={});var i=r,n=i.placement,o=void 0===n?e.placement:n,s=i.strategy,a=void 0===s?e.strategy:s,c=i.boundary,u=void 0===c?A:c,d=i.rootBoundary,h=void 0===d?N:d,f=i.elementContext,m=void 0===f?F:f,g=i.altBoundary,v=void 0!==g&&g,y=i.padding,w=void 0===y?0:y,b=oe("number"!=typeof w?w:se(w,L)),_=m===F?R:F,S=e.rects.popper,k=e.elements[v?_:m],O=ne(t(k)?k:k.contextElement||p(e.elements.popper),u,h,a),E=l(e.elements.reference),j=J({reference:E,element:S,strategy:"absolute",placement:o}),P=re(Object.assign({},S,j)),C=m===F?P:E,D={top:O.top-C.top+b.top,bottom:C.bottom-O.bottom+b.bottom,left:O.left-C.left+b.left,right:C.right-O.right+b.right},M=e.modifiersData.offset;if(m===F&&M){var z=M[o];Object.keys(D).forEach((function(e){var t=[q,T].indexOf(e)>=0?1:-1,r=[x,T].indexOf(e)>=0?"y":"x";D[e]+=z[r]*t}))}return D}function ce(e,t,r){return n(e,o(t,r))}const le={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,i=e.name,s=r.mainAxis,a=void 0===s||s,c=r.altAxis,l=void 0!==c&&c,u=r.boundary,d=r.rootBoundary,p=r.altBoundary,h=r.padding,f=r.tether,m=void 0===f||f,g=r.tetherOffset,y=void 0===g?0:g,w=ae(t,{boundary:u,rootBoundary:d,padding:h,altBoundary:p}),b=H(t.placement),_=W(t.placement),S=!_,E=U(b),L="x"===E?"y":"x",P=t.modifiersData.popperOffsets,A=t.rects.reference,N=t.rects.popper,F="function"==typeof y?y(Object.assign({},t.rects,{placement:t.placement})):y,R="number"==typeof F?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(P){if(a){var M,z="y"===E?x:O,V="y"===E?T:q,B="y"===E?"height":"width",I=P[E],$=I+w[z],J=I-w[V],Y=m?-N[B]/2:0,Q=_===j?A[B]:N[B],X=_===j?-N[B]:-A[B],G=t.elements.arrow,Z=m&&G?v(G):{width:0,height:0},K=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ee=K[z],te=K[V],re=ce(0,A[B],Z[B]),ie=S?A[B]/2-Y-re-ee-R.mainAxis:Q-re-ee-R.mainAxis,ne=S?-A[B]/2+Y+re+te+R.mainAxis:X+re+te+R.mainAxis,oe=t.elements.arrow&&k(t.elements.arrow),se=oe?"y"===E?oe.clientTop||0:oe.clientLeft||0:0,le=null!=(M=null==C?void 0:C[E])?M:0,ue=I+ne-le,de=ce(m?o($,I+ie-le-se):$,I,m?n(J,ue):J);P[E]=de,D[E]=de-I}if(l){var pe,he="x"===E?x:O,fe="x"===E?T:q,me=P[L],ge="y"===L?"height":"width",ve=me+w[he],ye=me-w[fe],we=-1!==[x,O].indexOf(b),be=null!=(pe=null==C?void 0:C[L])?pe:0,_e=we?ve:me-A[ge]-N[ge]-be+R.altAxis,Se=we?me+A[ge]+N[ge]-be-R.altAxis:ye,ke=m&&we?function(e,t,r){var i=ce(e,t,r);return i>r?r:i}(_e,me,Se):ce(m?_e:ve,me,m?Se:ye);P[L]=ke,D[L]=ke-me}t.modifiersData[i]=D}},requiresIfExists:["offset"]};var ue=function(e,t){return oe("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:se(e,L))};const de={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,r=e.state,i=e.name,n=e.options,o=r.elements.arrow,s=r.modifiersData.popperOffsets,a=H(r.placement),c=U(a),l=[O,q].indexOf(a)>=0?"height":"width";if(o&&s){var u=ue(n.padding,r),d=v(o),p="y"===c?x:O,h="y"===c?T:q,f=r.rects.reference[l]+r.rects.reference[c]-s[c]-r.rects.popper[l],m=s[c]-r.rects.reference[c],g=k(o),y=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,w=f/2-m/2,b=u[p],_=y-d[l]-u[h],S=y/2-d[l]/2+w,E=ce(b,S,_),L=c;r.modifiersData[i]=((t={})[L]=E,t.centerOffset=E-S,t)}},effect:function(e){var t=e.state,r=e.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&te(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pe(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function he(e){return[x,q,T,O].some((function(t){return e[t]>=0}))}var fe=I({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var r=t.state,i=t.instance,n=t.options,o=n.scroll,s=void 0===o||o,a=n.resize,c=void 0===a||a,l=e(r.elements.popper),u=[].concat(r.scrollParents.reference,r.scrollParents.popper);return s&&u.forEach((function(e){e.addEventListener("scroll",i.update,$)})),c&&l.addEventListener("resize",i.update,$),function(){s&&u.forEach((function(e){e.removeEventListener("scroll",i.update,$)})),c&&l.removeEventListener("resize",i.update,$)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,r=e.name;t.modifiersData[r]=J({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,r=e.options,i=r.gpuAcceleration,n=void 0===i||i,o=r.adaptive,s=void 0===o||o,a=r.roundOffsets,c=void 0===a||a,l={placement:H(t.placement),variation:W(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Q(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Q(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},n=t.attributes[e]||{},o=t.elements[e];r(o)&&d(o)&&(Object.assign(o.style,i),Object.keys(n).forEach((function(e){var t=n[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],o=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});r(n)&&d(n)&&(Object.assign(n.style,s),Object.keys(o).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]},X,{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var n=r.mainAxis,o=void 0===n||n,s=r.altAxis,a=void 0===s||s,c=r.fallbackPlacements,l=r.padding,u=r.boundary,d=r.rootBoundary,p=r.altBoundary,h=r.flipVariations,f=void 0===h||h,m=r.allowedAutoPlacements,g=t.options.placement,v=H(g),y=c||(v===g||!f?[Z(g)]:function(e){if(H(e)===E)return[];var t=Z(e);return[ee(e),t,ee(t)]}(g)),w=[g].concat(y).reduce((function(e,r){return e.concat(H(r)===E?function(e,t){void 0===t&&(t={});var r=t,i=r.placement,n=r.boundary,o=r.rootBoundary,s=r.padding,a=r.flipVariations,c=r.allowedAutoPlacements,l=void 0===c?D:c,u=W(i),d=u?a?C:C.filter((function(e){return W(e)===u})):L,p=d.filter((function(e){return l.indexOf(e)>=0}));0===p.length&&(p=d);var h=p.reduce((function(t,r){return t[r]=ae(e,{placement:r,boundary:n,rootBoundary:o,padding:s})[H(r)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:r,boundary:u,rootBoundary:d,padding:l,flipVariations:f,allowedAutoPlacements:m}):r)}),[]),b=t.rects.reference,_=t.rects.popper,S=new Map,k=!0,P=w[0],A=0;A<w.length;A++){var N=w[A],F=H(N),R=W(N)===j,M=[x,T].indexOf(F)>=0,z=M?"width":"height",V=ae(t,{placement:N,boundary:u,rootBoundary:d,altBoundary:p,padding:l}),B=M?R?q:O:R?T:x;b[z]>_[z]&&(B=Z(B));var I=Z(B),$=[];if(o&&$.push(V[F]<=0),a&&$.push(V[B]<=0,V[I]<=0),$.every((function(e){return e}))){P=N,k=!1;break}S.set(N,$)}if(k)for(var U=function(e){var t=w.find((function(t){var r=S.get(t);if(r)return r.slice(0,e).every((function(e){return e}))}));if(t)return P=t,"break"},J=f?3:1;J>0;J--){if("break"===U(J))break}t.placement!==P&&(t.modifiersData[i]._skip=!0,t.placement=P,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},le,de,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,r=e.name,i=t.rects.reference,n=t.rects.popper,o=t.modifiersData.preventOverflow,s=ae(t,{elementContext:"reference"}),a=ae(t,{altBoundary:!0}),c=pe(s,i),l=pe(a,n,o),u=he(c),d=he(l);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),me=function(){return me=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},me.apply(this,arguments)};function ge(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}class ve{liquidMethodMissing(e){}}const ye=Object.prototype.toString,we=String.prototype.toLowerCase,be=Object.hasOwnProperty;function _e(e){return"string"==typeof e}function Se(e){return"function"==typeof e}function ke(e){return e&&Se(e.then)}function xe(e){return e&&Se(e.next)&&Se(e.throw)&&Se(e.return)}function Te(e){return _e(e=qe(e))?e:Le(e)?"":je(e)?e.map((e=>Te(e))).join(""):String(e)}function qe(e){return e instanceof ve&&Se(e.valueOf)?e.valueOf():e}function Oe(e){return"number"==typeof e}function Ee(e){return e&&Se(e.toLiquid)?Ee(e.toLiquid()):e}function Le(e){return null==e}function je(e){return"[object Array]"===ye.call(e)}function Pe(e,t){e=e||{};for(const r in e)if(be.call(e,r)&&!1===t(e[r],r,e))break;return e}function Ae(e){return e[e.length-1]}function Ne(e){const t=typeof e;return null!==e&&("object"===t||"function"===t)}function Fe(e,t,r=1){const i=[];for(let n=e;n<t;n+=r)i.push(n);return i}function Re(e,t,r=" "){return Ce(e,t,r,((e,t)=>t+e))}function Ce(e,t,r,i){let n=t-(e=String(e)).length;for(;n-- >0;)e=i(e,r);return e}function De(e){return e}function Me(e){return e.replace(/(\w?)([A-Z])/g,((e,t,r)=>(t?t+"_":"")+r.toLowerCase()))}function ze(e,t){return null==e&&null==t?0:null==e?1:null==t||(e=we.call(e))<(t=we.call(t))?-1:e>t?1:0}function Ve(e){return(...t)=>e(...t.map(qe))}function Be(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}class Ie{constructor(e,t,r,i){this.key=e,this.value=t,this.next=r,this.prev=i}}class $e{constructor(e,t=0){this.limit=e,this.size=t,this.cache={},this.head=new Ie("HEAD",null,null,null),this.tail=new Ie("TAIL",null,null,null),this.head.next=this.tail,this.tail.prev=this.head}write(e,t){if(this.cache[e])this.cache[e].value=t;else{const r=new Ie(e,t,this.head.next,this.head);this.head.next.prev=r,this.head.next=r,this.cache[e]=r,this.size++,this.ensureLimit()}}read(e){if(!this.cache[e])return;const{value:t}=this.cache[e];return this.remove(e),this.write(e,t),t}remove(e){const t=this.cache[e];t.prev.next=t.next,t.next.prev=t.prev,delete this.cache[e],this.size--}clear(){this.head.next=this.tail,this.tail.prev=this.head,this.size=0,this.cache={}}ensureLimit(){this.size>this.limit&&this.remove(this.tail.prev.key)}}function He(e,t){const r=document.createElement("base");r.href=e;const i=document.getElementsByTagName("head")[0];i.insertBefore(r,i.firstChild);const n=document.createElement("a");n.href=t;const o=n.href;return i.removeChild(r),o}var We=Object.freeze({__proto__:null,resolve:function(e,t,r){return e.length&&"/"!==Ae(e)&&(e+="/"),He(e,t).replace(/^(\w+:\/\/[^/]+)(\/[^?]+)/,((e,t,i)=>{const n=i.split("/").pop();return/\.\w+$/.test(n)?e:t+i+r}))},readFile:function(e){return ge(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{const i=new XMLHttpRequest;i.onload=()=>{i.status>=200&&i.status<300?t(i.responseText):r(new Error(i.statusText))},i.onerror=()=>{r(new Error("An error occurred whilst receiving the response."))},i.open("GET",e),i.send()}))}))},readFileSync:function(e){const t=new XMLHttpRequest;if(t.open("GET",e,!1),t.send(),t.status<200||t.status>=300)throw new Error(t.statusText);return t.responseText},exists:function(e){return ge(this,void 0,void 0,(function*(){return!0}))},existsSync:function(e){return!0},dirname:function(e){return He(e,".")},sep:"/"});function Ue(e){return e&&Se(e.equals)}function Je(e,t){return!Ye(e,t)}function Ye(e,t){return t.opts.jsTruthy?!e:!1===e||null==e}const Qe={"==":(e,t)=>Ue(e)?e.equals(t):Ue(t)?t.equals(e):qe(e)===qe(t),"!=":(e,t)=>Ue(e)?!e.equals(t):Ue(t)?!t.equals(e):qe(e)!==qe(t),">":(e,t)=>Ue(e)?e.gt(t):Ue(t)?t.lt(e):qe(e)>qe(t),"<":(e,t)=>Ue(e)?e.lt(t):Ue(t)?t.gt(e):qe(e)<qe(t),">=":(e,t)=>Ue(e)?e.geq(t):Ue(t)?t.leq(e):qe(e)>=qe(t),"<=":(e,t)=>Ue(e)?e.leq(t):Ue(t)?t.geq(e):qe(e)<=qe(t),contains:(e,t)=>(e=qe(e),t=qe(t),!(!e||!Se(e.indexOf))&&e.indexOf(t)>-1),and:(e,t,r)=>Je(qe(e),r)&&Je(qe(t),r),or:(e,t,r)=>Je(qe(e),r)||Je(qe(t),r)},Xe=[0,0,0,0,0,0,0,0,0,20,4,4,4,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,2,8,0,0,0,0,8,0,0,0,64,0,65,0,0,33,33,33,33,33,33,33,33,33,33,0,0,2,2,2,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ge=1,Ze=4,Ke=16;function et(e){const t={};for(const[r,i]of Object.entries(e)){let e=t;for(let t=0;t<r.length;t++){const i=r[t];e[i]=e[i]||{},t===r.length-1&&Xe[r.charCodeAt(t)]&Ge&&(e[i].needBoundary=!0),e=e[i]}e.handler=i,e.end=!0}return t}Xe[160]=Xe[5760]=Xe[6158]=Xe[8192]=Xe[8193]=Xe[8194]=Xe[8195]=Xe[8196]=Xe[8197]=Xe[8198]=Xe[8199]=Xe[8200]=Xe[8201]=Xe[8202]=Xe[8232]=Xe[8233]=Xe[8239]=Xe[8287]=Xe[12288]=Ze;const tt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},rt={"&amp;":"&","&lt;":"<","&gt;":">","&#34;":'"',"&#39;":"'"};function it(e){return Te(e).replace(/&|<|>|"|'/g,(e=>tt[e]))}const nt=Ve(Math.abs),ot=Ve(Math.max),st=Ve(Math.min),at=Ve(Math.ceil),ct=Ve(((e,t,r=!1)=>r?Math.floor(e/t):e/t)),lt=Ve(Math.floor),ut=Ve(((e,t)=>e-t)),dt=Ve(((e,t)=>e%t)),pt=Ve(((e,t)=>e*t));function ht(e){return je(e=qe(e))?e:_e(e)&&e.length>0?[e]:Ne(t=e)&&Symbol.iterator in t?Array.from(e):Ne(e)?Object.keys(e).map((t=>[t,e[t]])):[];var t}function ft(e){return Le(e)?[]:je(e)?e:[e]}const mt=Ve(((e,t)=>ft(e).join(void 0===t?" ":t))),gt=Ve((e=>je(e)?Ae(e):"")),vt=Ve((e=>je(e)?e[0]:"")),yt=Ve((e=>[...ft(e)].reverse()));const wt=/%([-_0^#:]+)?(\d+)?([EO])?(.)/,bt=["January","February","March","April","May","June","July","August","September","October","November","December"],_t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],St=bt.map(Tt),kt=_t.map(Tt),xt={1:"st",2:"nd",3:"rd",default:"th"};function Tt(e){return e.slice(0,3)}function qt(e){const t=function(e){const t=e.getFullYear();return!(0!=(3&t)||!(t%100||t%400==0&&t))}(e)?29:28;return[31,t,31,30,31,30,31,31,30,31,30,31]}function Ot(e){let t=0;for(let r=0;r<e.getMonth();++r)t+=qt(e)[r];return t+e.getDate()}function Et(e,t){const r=Ot(e)+(t-e.getDay()),i=7-new Date(e.getFullYear(),0,1).getDay()+t;return String(Math.floor((r-i)/7)+1)}const Lt={d:2,e:2,H:2,I:2,j:3,k:2,l:2,L:3,m:2,M:2,S:2,U:2,W:2},jt={a:" ",A:" ",b:" ",B:" ",c:" ",e:" ",k:" ",l:" ",p:" ",P:" "},Pt={a:e=>kt[e.getDay()],A:e=>_t[e.getDay()],b:e=>St[e.getMonth()],B:e=>bt[e.getMonth()],c:e=>e.toLocaleString(),C:e=>function(e){return parseInt(e.getFullYear().toString().substring(0,2),10)}(e),d:e=>e.getDate(),e:e=>e.getDate(),H:e=>e.getHours(),I:e=>String(e.getHours()%12||12),j:e=>Ot(e),k:e=>e.getHours(),l:e=>String(e.getHours()%12||12),L:e=>e.getMilliseconds(),m:e=>e.getMonth()+1,M:e=>e.getMinutes(),N:(e,t)=>{const r=Number(t.width)||9;return function(e,t,r=" "){return Ce(e,t,r,((e,t)=>e+t))}(String(e.getMilliseconds()).slice(0,r),r,"0")},p:e=>e.getHours()<12?"AM":"PM",P:e=>e.getHours()<12?"am":"pm",q:e=>function(e){const t=e.getDate().toString(),r=parseInt(t.slice(-1));return xt[r]||xt.default}(e),s:e=>Math.round(e.getTime()/1e3),S:e=>e.getSeconds(),u:e=>e.getDay()||7,U:e=>Et(e,0),w:e=>e.getDay(),W:e=>Et(e,1),x:e=>e.toLocaleDateString(),X:e=>e.toLocaleTimeString(),y:e=>e.getFullYear().toString().slice(2,4),Y:e=>e.getFullYear(),z:(e,t)=>{const r=Math.abs(e.getTimezoneOffset()),i=Math.floor(r/60),n=r%60;return(e.getTimezoneOffset()>0?"-":"+")+Re(i,2,"0")+(t.flags[":"]?":":"")+Re(n,2,"0")},t:()=>"\t",n:()=>"\n","%":()=>"%"};function At(e,t){let r,i="",n=t;for(;r=wt.exec(n);)i+=n.slice(0,r.index),n=n.slice(r.index+r[0].length),i+=Nt(e,r);return i+n}function Nt(e,t){const[r,i="",n,o,s]=t,a=Pt[s];if(!a)return r;const c={};for(const e of i)c[e]=!0;let l=String(a(e,{flags:c,width:n,modifier:o})),u=jt[s]||"0",d=n||Lt[s]||0;var p;return c["^"]?l=l.toUpperCase():c["#"]&&(p=l,l=[...p].some((e=>e>="a"&&e<="z"))?p.toUpperCase():p.toLowerCase()),c._?u=" ":c[0]&&(u="0"),c["-"]&&(d=0),Re(l,d,u)}Pt.h=Pt.b;const Ft=(new Date).getTimezoneOffset(),Rt=/([zZ]|([+-])(\d{2}):(\d{2}))$/;class Ct{constructor(e,t){if(e instanceof Ct)this.date=e.date,t=e.timezoneOffset;else{const r=6e4*(Ft-t),i=new Date(e).getTime()+r;this.date=new Date(i)}this.timezoneOffset=t}getTime(){return this.date.getTime()}getMilliseconds(){return this.date.getMilliseconds()}getSeconds(){return this.date.getSeconds()}getMinutes(){return this.date.getMinutes()}getHours(){return this.date.getHours()}getDay(){return this.date.getDay()}getDate(){return this.date.getDate()}getMonth(){return this.date.getMonth()}getFullYear(){return this.date.getFullYear()}toLocaleTimeString(e){return this.date.toLocaleTimeString(e)}toLocaleDateString(e){return this.date.toLocaleDateString(e)}getTimezoneOffset(){return this.timezoneOffset}static createDateFixedToTimezone(e){const t=e.match(Rt);if(t&&"Z"===t[1])return new Ct(+new Date(e),0);if(t&&t[2]&&t[3]&&t[4]){const[,,r,i,n]=t,o=("+"===r?-1:1)*(60*parseInt(i,10)+parseInt(n,10));return new Ct(+new Date(e),o)}return new Date(e)}}const Dt=De;class Mt extends Error{constructor(e,t){super(e.message),this.originalError=e,this.token=t,this.context=""}update(){const e=this.originalError;this.context=function(e){const[t]=e.getPosition(),r=e.input.split("\n"),i=Math.max(t-2,1),n=Math.min(t+3,r.length),o=Fe(i,n+1).map((e=>`${e===t?">> ":"   "}${Re(String(e),String(n).length)}| ${r[e-1]}`)).join("\n");return o}(this.token),this.message=function(e,t){t.file&&(e+=`, file:${t.file}`);const[r,i]=t.getPosition();return e+=`, line:${r}, col:${i}`}(e.message,this.token),this.stack=this.message+"\n"+this.context+"\n"+this.stack+"\nFrom "+e.stack}}class zt extends Mt{constructor(e,t){super(new Error(e),t),this.name="TokenizationError",super.update()}}class Vt extends Mt{constructor(e,t){super(e,t),this.name="ParseError",this.message=e.message,super.update()}}class Bt extends Mt{constructor(e,t){super(e,t.token),this.name="RenderError",this.message=e.message,super.update()}static is(e){return"RenderError"===e.name}}class It extends Mt{constructor(e,t){super(e,t),this.name="UndefinedVariableError",this.message=e.message,super.update()}}class $t extends Error{constructor(e){super(`undefined variable: ${e}`),this.name="InternalUndefinedVariableError",this.variableName=e}}class Ht extends Error{constructor(e){super(e),this.name="AssertionError",this.message=e+""}}function Wt(e,t){if(!e){const r="function"==typeof t?t():t||`expect ${e} to be true`;throw new Ht(r)}}var Ut,Jt=Object.freeze({__proto__:null,escape:it,escapeOnce:function(e){return it(function(e){return Te(e).replace(/&(amp|lt|gt|#34|#39);/g,(e=>rt[e]))}(Te(e)))},newlineToBr:function(e){return Te(e).replace(/\n/g,"<br />\n")},stripHtml:function(e){return Te(e).replace(/<script.*?<\/script>|<!--.*?-->|<style.*?<\/style>|<.*?>/g,"")},abs:nt,atLeast:ot,atMost:st,ceil:at,dividedBy:ct,floor:lt,minus:ut,modulo:dt,times:pt,round:function(e,t=0){e=qe(e),t=qe(t);const r=Math.pow(10,t);return Math.round(e*r)/r},plus:function(e,t){return e=qe(e),t=qe(t),Number(e)+Number(t)},urlDecode:e=>Te(e).split("+").map(decodeURIComponent).join(" "),urlEncode:e=>Te(e).split(" ").map(encodeURIComponent).join("+"),join:mt,last:gt,first:vt,reverse:yt,sort:function*(e,t){const r=[];for(const i of ft(qe(e)))r.push([i,t?yield this.context._getFromScope(i,Te(t).split(".")):i]);return r.sort(((e,t)=>{const r=e[1],i=t[1];return r<i?-1:r>i?1:0})).map((e=>e[0]))},sortNatural:function(e,t){e=qe(e);const r=Te(t),i=void 0===t?ze:(e,t)=>ze(e[r],t[r]);return[...ft(e)].sort(i)},size:e=>e&&e.length||0,map:function*(e,t){const r=[];for(const i of ft(qe(e)))r.push(yield this.context._getFromScope(i,Te(t).split(".")));return r},compact:function(e){return ft(e=qe(e)).filter((e=>!Le(qe(e))))},concat:function(e,t=[]){return e=qe(e),t=ft(t).map((e=>qe(e))),ft(e).concat(t)},slice:function(e,t,r=1){return Le(e=qe(e))?[]:(je(e)||(e=Te(e)),t=t<0?e.length+t:t,e.slice(t,t+r))},where:function*(e,t,r){const i=[];e=ft(qe(e));for(const r of e)i.push(yield this.context._getFromScope(r,Te(t).split(".")));return e.filter(((e,t)=>void 0===r?Je(i[t],this.context):Ue(r)?r.equals(i[t]):i[t]===r))},uniq:function(e){e=qe(e);const t={};return(e||[]).filter((e=>!be.call(t,String(e))&&(t[String(e)]=!0,!0)))},date:function(e,t,r){const i=this.context.opts;let n;return e=qe(e),t=Te(t),n="now"===e||"today"===e?new Date:Oe(e)?new Date(1e3*e):_e(e)?/^\d+$/.test(e)?new Date(1e3*+e):i.preserveTimezones?Ct.createDateFixedToTimezone(e):new Date(e):e,function(e){return(e instanceof Date||e instanceof Ct)&&!isNaN(e.getTime())}(n)?(void 0!==r?n=new Ct(n,r):void 0!==i.timezoneOffset&&(n=new Ct(n,i.timezoneOffset)),At(n,t)):e},Default:function(e,t,...r){return je(e=qe(e))||_e(e)?e.length?e:t:(!1!==e||!new Map(r).get("allow_false"))&&(Ye(e,this.context)?t:e)},json:function(e){return JSON.stringify(e)},raw:Dt,append:function(e,t){return Wt(2===arguments.length,"append expect 2 arguments"),Te(e)+Te(t)},prepend:function(e,t){return Wt(2===arguments.length,"prepend expect 2 arguments"),Te(t)+Te(e)},lstrip:function(e,t){return t?(t=Be(Te(t)),Te(e).replace(new RegExp(`^[${t}]+`,"g"),"")):Te(e).replace(/^\s+/,"")},downcase:function(e){return Te(e).toLowerCase()},upcase:function(e){return Te(e).toUpperCase()},remove:function(e,t){return Te(e).split(String(t)).join("")},removeFirst:function(e,t){return Te(e).replace(String(t),"")},rstrip:function(e,t){return t?(t=Be(Te(t)),Te(e).replace(new RegExp(`[${t}]+$`,"g"),"")):Te(e).replace(/\s+$/,"")},split:function(e,t){const r=Te(e).split(String(t));for(;r.length&&""===r[r.length-1];)r.pop();return r},strip:function(e,t){return t?(t=Be(Te(t)),Te(e).replace(new RegExp(`^[${t}]+`,"g"),"").replace(new RegExp(`[${t}]+$`,"g"),"")):Te(e).trim()},stripNewlines:function(e){return Te(e).replace(/\n/g,"")},capitalize:function(e){return(e=Te(e)).charAt(0).toUpperCase()+e.slice(1).toLowerCase()},replace:function(e,t,r){return Te(e).split(String(t)).join(r)},replaceFirst:function(e,t,r){return Te(e).replace(String(t),r)},truncate:function(e,t=50,r="..."){return(e=Te(e)).length<=t?e:e.substring(0,t-r.length)+r},truncatewords:function(e,t=15,r="..."){const i=Te(e).split(/\s+/);t<=0&&(t=1);let n=i.slice(0,t).join(" ");return i.length>=t&&(n+=r),n}});function Yt(e){return!!(or(e)&Ut.Delimited)}function Qt(e){return or(e)===Ut.Operator}function Xt(e){return or(e)===Ut.HTML}function Gt(e){return or(e)===Ut.Output}function Zt(e){return or(e)===Ut.Tag}function Kt(e){return or(e)===Ut.Quoted}function er(e){return or(e)===Ut.Literal}function tr(e){return or(e)===Ut.Number}function rr(e){return or(e)===Ut.PropertyAccess}function ir(e){return or(e)===Ut.Word}function nr(e){return or(e)===Ut.Range}function or(e){return e?e.kind:-1}!function(e){e[e.Number=1]="Number",e[e.Literal=2]="Literal",e[e.Tag=4]="Tag",e[e.Output=8]="Output",e[e.HTML=16]="HTML",e[e.Filter=32]="Filter",e[e.Hash=64]="Hash",e[e.PropertyAccess=128]="PropertyAccess",e[e.Word=256]="Word",e[e.Range=512]="Range",e[e.Quoted=1024]="Quoted",e[e.Operator=2048]="Operator",e[e.Delimited=12]="Delimited"}(Ut||(Ut={}));class sr extends ve{equals(e){return!(e instanceof sr)&&(_e(e=qe(e))||je(e)?0===e.length:!!Ne(e)&&0===Object.keys(e).length)}gt(){return!1}geq(){return!1}lt(){return!1}leq(){return!1}valueOf(){return""}}const ar=new class extends ve{equals(e){return Le(qe(e))}gt(){return!1}geq(){return!1}lt(){return!1}leq(){return!1}valueOf(){return null}},cr={true:!0,false:!1,nil:ar,null:ar,empty:new sr,blank:new class extends sr{equals(e){return!1===e||(!!Le(qe(e))||(_e(e)?/^\s*$/.test(e):super.equals(e)))}}},lr=/[\da-fA-F]/,ur=/[0-7]/,dr={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v"};function pr(e){const t=e.charCodeAt(0);return t>=97?t-87:t>=65?t-55:t-48}function hr(e){let t="";for(let r=1;r<e.length-1;r++)if("\\"===e[r])if(void 0!==dr[e[r+1]])t+=dr[e[++r]];else if("u"===e[r+1]){let i=0,n=r+2;for(;n<=r+5&&lr.test(e[n]);)i=16*i+pr(e[n++]);r=n-1,t+=String.fromCharCode(i)}else if(ur.test(e[r+1])){let i=r+1,n=0;for(;i<=r+3&&ur.test(e[i]);)n=8*n+pr(e[i++]);r=i-1,t+=String.fromCharCode(n)}else t+=e[++r];else t+=e[r];return t}function fr(e){return ge(this,void 0,void 0,(function*(){if(!xe(e))return e;let t,r=!1,i="next";do{const n=e[i](t);r=n.done,t=n.value,i="next";try{xe(t)&&(t=fr(t)),ke(t)&&(t=yield t)}catch(e){i="throw",t=e}}while(!r);return t}))}function mr(e){if(!xe(e))return e;let t,r=!1,i="next";do{const n=e[i](t);if(r=n.done,t=n.value,i="next",xe(t))try{t=mr(t)}catch(e){i="throw",t=e}}while(!r);return t}class gr{constructor(e){this.postfix=[...br(e)]}*evaluate(e,t){Wt(e,"unable to evaluate: context not defined");const r=[];for(const i of this.postfix)if(Qt(i)){const t=r.pop(),n=r.pop(),o=yield wr(e.opts.operators,i,n,t,e);r.push(o)}else r.push(yield vr(i,e,t&&1===this.postfix.length));return r[0]}}function*vr(e,t,r=!1){return rr(e)?yield function*(e,t,r){const i=[];for(const r of e.props)i.push(yield vr(r,t,!1));try{return yield t._get([e.propertyName,...i])}catch(t){if(r&&"InternalUndefinedVariableError"===t.name)return null;throw new It(t,e)}}(e,t,r):nr(e)?yield function*(e,t){const r=yield vr(e.lhs,t),i=yield vr(e.rhs,t);return Fe(+r,+i+1)}(e,t):er(e)?function(e){return cr[e.literal]}(e):tr(e)?function(e){const t=e.whole.content+"."+(e.decimal?e.decimal.content:"");return Number(t)}(e):ir(e)?e.getText():Kt(e)?yr(e):void 0}function yr(e){return hr(e.getText())}function wr(e,t,r,i,n){return(0,e[t.operator])(r,i,n)}function*br(e){const t=[];for(const r of e)if(Qt(r)){for(;t.length&&t[t.length-1].getPrecedence()>r.getPrecedence();)yield t.pop();t.push(r)}else yield r;for(;t.length;)yield t.pop()}class _r{constructor(e,t,r,i,n){this.kind=e,this.input=t,this.begin=r,this.end=i,this.file=n}getText(){return this.input.slice(this.begin,this.end)}getPosition(){let[e,t]=[1,1];for(let r=0;r<this.begin;r++)"\n"===this.input[r]?(e++,t=1):t++;return[e,t]}size(){return this.end-this.begin}}class Sr extends _r{constructor(e,t,r,i,n,o,s,a){super(e,r,i,n,a),this.trimLeft=!1,this.trimRight=!1,this.content=this.getText();const c="-"===t[0],l="-"===Ae(t);this.content=t.slice(c?1:0,l?-1:t.length).trim(),this.trimLeft=c||o,this.trimRight=l||s}}function kr(e,t){if(!e||!Xt(e))return;const r=t?Ze:Ke;for(;Xe[e.input.charCodeAt(e.end-1-e.trimRight)]&r;)e.trimRight++}function xr(e,t){if(!e||!Xt(e))return;const r=t?Ze:Ke;for(;Xe[e.input.charCodeAt(e.begin+e.trimLeft)]&r;)e.trimLeft++;"\n"===e.input.charAt(e.begin+e.trimLeft)&&e.trimLeft++}class Tr extends _r{constructor(e,t){super(Ut.Number,e.input,e.begin,t?t.end:e.end,e.file),this.whole=e,this.decimal=t}}class qr extends _r{constructor(e,t,r,i){super(Ut.Word,e,t,r,i),this.input=e,this.begin=t,this.end=r,this.file=i,this.content=this.getText()}isNumber(e=!1){for(let t=e&&64&Xe[this.input.charCodeAt(this.begin)]?this.begin+1:this.begin;t<this.end;t++)if(!(32&Xe[this.input.charCodeAt(t)]))return!1;return!0}}class Or extends _r{constructor(e,t,r,i){super(Ut.Literal,e,t,r,i),this.input=e,this.begin=t,this.end=r,this.file=i,this.literal=this.getText()}}const Er={"==":1,"!=":1,">":1,"<":1,">=":1,"<=":1,contains:1,and:0,or:0};class Lr extends _r{constructor(e,t,r,i){super(Ut.Operator,e,t,r,i),this.input=e,this.begin=t,this.end=r,this.file=i,this.operator=this.getText()}getPrecedence(){const e=this.getText();return e in Er?Er[e]:1}}class jr extends _r{constructor(e,t,r){super(Ut.PropertyAccess,e.input,e.begin,r,e.file),this.variable=e,this.props=t,this.propertyName=this.variable instanceof qr?this.variable.getText():hr(this.variable.getText())}}class Pr extends _r{constructor(e,t,r,i,n,o){super(Ut.Filter,r,i,n,o),this.name=e,this.args=t}}class Ar extends _r{constructor(e,t,r,i,n,o){super(Ut.Hash,e,t,r,o),this.input=e,this.begin=t,this.end=r,this.name=i,this.value=n,this.file=o}}class Nr extends _r{constructor(e,t,r,i){super(Ut.Quoted,e,t,r,i),this.input=e,this.begin=t,this.end=r,this.file=i}}class Fr extends _r{constructor(e,t,r,i){super(Ut.HTML,e,t,r,i),this.input=e,this.begin=t,this.end=r,this.file=i,this.trimLeft=0,this.trimRight=0}getContent(){return this.input.slice(this.begin+this.trimLeft,this.end-this.trimRight)}}class Rr extends _r{constructor(e,t,r,i,n,o){super(Ut.Range,e,t,r,o),this.input=e,this.begin=t,this.end=r,this.lhs=i,this.rhs=n,this.file=o}}class Cr extends Sr{constructor(e,t,r,i,n){const{trimOutputLeft:o,trimOutputRight:s,outputDelimiterLeft:a,outputDelimiterRight:c}=i,l=e.slice(t+a.length,r-c.length);super(Ut.Output,l,e,t,r,o,s,n)}}class Dr extends Sr{constructor(e,t,r,i,n){const o=e.slice(t,r);if(super(Ut.Tag,o,e,t,r,!1,!1,n),/\S/.test(o)){const e=new Mr(this.content,i.operatorsTrie);if(this.name=e.readTagName(),!this.name)throw new zt("illegal liquid tag syntax",this);e.skipBlank(),this.args=e.remaining()}else this.name="",this.args=""}}class Mr{constructor(e,t=gi.operatorsTrie,r=""){this.input=e,this.trie=t,this.file=r,this.p=0,this.rawBeginAt=-1,this.N=e.length}readExpression(){return new gr(this.readExpressionTokens())}*readExpressionTokens(){const e=this.readValue();if(e)for(yield e;this.p<this.N;){const e=this.readOperator();if(!e)return;const t=this.readValue();if(!t)return;yield e,yield t}}readOperator(){this.skipBlank();const e=function(e,t,r,i=e.length){let n,o=r,s=t;for(;o[e[s]]&&s<i;)o=o[e[s++]],o.end&&(n=o);return n?n.needBoundary&&Xe[e.charCodeAt(s)]&Ge?-1:s:-1}(this.input,this.p,this.trie);if(-1!==e)return new Lr(this.input,this.p,this.p=e,this.file)}readFilters(){const e=[];for(;;){const t=this.readFilter();if(!t)return e;e.push(t)}}readFilter(){if(this.skipBlank(),this.end())return null;Wt("|"===this.peek(),(()=>`unexpected token at ${this.snapshot()}`)),this.p++;const e=this.p,t=this.readIdentifier();if(!t.size())return null;const r=[];if(this.skipBlank(),":"===this.peek())do{++this.p;const e=this.readFilterArg();e&&r.push(e),this.skipBlank(),Wt(this.end()||","===this.peek()||"|"===this.peek(),(()=>`unexpected character ${this.snapshot()}`))}while(","===this.peek());return new Pr(t.getText(),r,this.input,e,this.p,this.file)}readFilterArg(){const e=this.readValue();if(!e)return;if(this.skipBlank(),":"!==this.peek())return e;++this.p;const t=this.readValue();return[e.getText(),t]}readTopLevelTokens(e=gi){const t=[];for(;this.p<this.N;){const r=this.readTopLevelToken(e);t.push(r)}return function(e,t){let r=!1;for(let i=0;i<e.length;i++){const n=e[i];Yt(n)&&(!r&&n.trimLeft&&kr(e[i-1],t.greedy),Zt(n)&&("raw"===n.name?r=!0:"endraw"===n.name&&(r=!1)),!r&&n.trimRight&&xr(e[i+1],t.greedy))}}(t,e),t}readTopLevelToken(e){const{tagDelimiterLeft:t,outputDelimiterLeft:r}=e;return this.rawBeginAt>-1?this.readEndrawOrRawContent(e):this.match(t)?this.readTagToken(e):this.match(r)?this.readOutputToken(e):this.readHTMLToken([t,r])}readHTMLToken(e){const t=this.p;for(;this.p<this.N&&!e.some((e=>this.match(e)));)++this.p;return new Fr(this.input,t,this.p,this.file)}readTagToken(e=gi){const{file:t,input:r}=this,i=this.p;if(-1===this.readToDelimiter(e.tagDelimiterRight))throw this.mkError(`tag ${this.snapshot(i)} not closed`,i);const n=new zr(r,i,this.p,e,t);return"raw"===n.name&&(this.rawBeginAt=i),n}readToDelimiter(e){for(;this.p<this.N;)if(8&this.peekType())this.readQuoted();else if(++this.p,this.rmatch(e))return this.p;return-1}readOutputToken(e=gi){const{file:t,input:r}=this,{outputDelimiterRight:i}=e,n=this.p;if(-1===this.readToDelimiter(i))throw this.mkError(`output ${this.snapshot(n)} not closed`,n);return new Cr(r,n,this.p,e,t)}readEndrawOrRawContent(e){const{tagDelimiterLeft:t,tagDelimiterRight:r}=e,i=this.p;let n=this.readTo(t)-t.length;for(;this.p<this.N;)if("endraw"===this.readIdentifier().getText())for(;this.p<=this.N;){if(this.rmatch(r)){const t=this.p;return i===n?(this.rawBeginAt=-1,new zr(this.input,i,t,e,this.file)):(this.p=n,new Fr(this.input,i,n,this.file))}if(this.rmatch(t))break;this.p++}else n=this.readTo(t)-t.length;throw this.mkError(`raw ${this.snapshot(this.rawBeginAt)} not closed`,i)}readLiquidTagTokens(e=gi){const t=[];for(;this.p<this.N;){const r=this.readLiquidTagToken(e);r.name&&t.push(r)}return t}readLiquidTagToken(e){const{file:t,input:r}=this,i=this.p;let n=this.N;return-1!==this.readToDelimiter("\n")&&(n=this.p),new Dr(r,i,n,e,t)}mkError(e,t){return new zt(e,new qr(this.input,t,this.N,this.file))}snapshot(e=this.p){return JSON.stringify((t=this.input.slice(e),r=16,t.length>r?t.slice(0,r-3)+"...":t));var t,r}readWord(){return console.warn("Tokenizer#readWord() will be removed, use #readIdentifier instead"),this.readIdentifier()}readIdentifier(){this.skipBlank();const e=this.p;for(;this.peekType()&Ge;)++this.p;return new qr(this.input,e,this.p,this.file)}readTagName(){return this.skipBlank(),"#"===this.input[this.p]?this.input.slice(this.p,++this.p):this.readIdentifier().getText()}readHashes(e){const t=[];for(;;){const r=this.readHash(e);if(!r)return t;t.push(r)}}readHash(e){this.skipBlank(),","===this.peek()&&++this.p;const t=this.p,r=this.readIdentifier();if(!r.size())return;let i;this.skipBlank();const n=e?"=":":";return this.peek()===n&&(++this.p,i=this.readValue()),new Ar(this.input,t,this.p,r,i,this.file)}remaining(){return this.input.slice(this.p)}advance(e=1){this.p+=e}end(){return this.p>=this.N}readTo(e){for(;this.p<this.N;)if(++this.p,this.rmatch(e))return this.p;return-1}readValue(){const e=this.readQuoted()||this.readRange();if(e)return e;if("["===this.peek()){this.p++;const e=this.readQuoted();if(!e)return;if("]"!==this.peek())return;return this.p++,new jr(e,[],this.p)}const t=this.readIdentifier();if(!t.size())return;let r=t.isNumber(!0);const i=[];for(;;)if("["===this.peek()){r=!1,this.p++;const e=this.readValue()||new qr(this.input,this.p,this.p,this.file);this.readTo("]"),i.push(e)}else{if("."!==this.peek()||"."===this.peek(1))break;{this.p++;const e=this.readIdentifier();if(!e.size())break;e.isNumber()||(r=!1),i.push(e)}}return!i.length&&cr.hasOwnProperty(t.content)?new Or(this.input,t.begin,t.end,this.file):r?new Tr(t,i[0]):new jr(t,i,this.p)}readRange(){this.skipBlank();const e=this.p;if("("!==this.peek())return;++this.p;const t=this.readValueOrThrow();this.p+=2;const r=this.readValueOrThrow();return++this.p,new Rr(this.input,e,this.p,t,r,this.file)}readValueOrThrow(){const e=this.readValue();return Wt(e,(()=>`unexpected token ${this.snapshot()}, value expected`)),e}readQuoted(){this.skipBlank();const e=this.p;if(!(8&this.peekType()))return;++this.p;let t=!1;for(;this.p<this.N&&(++this.p,this.input[this.p-1]!==this.input[e]||t);)t?t=!1:"\\"===this.input[this.p-1]&&(t=!0);return new Nr(this.input,e,this.p,this.file)}*readFileNameTemplate(e){const{outputDelimiterLeft:t}=e,r=[","," ",t],i=new Set(r);for(;this.p<this.N&&!i.has(this.peek());)yield this.match(t)?this.readOutputToken(e):this.readHTMLToken(r)}match(e){for(let t=0;t<e.length;t++)if(e[t]!==this.input[this.p+t])return!1;return!0}rmatch(e){for(let t=0;t<e.length;t++)if(e[e.length-1-t]!==this.input[this.p-1-t])return!1;return!0}peekType(e=0){return Xe[this.input.charCodeAt(this.p+e)]}peek(e=0){return this.input[this.p+e]}skipBlank(){for(;this.peekType()&Ze;)++this.p}}class zr extends Sr{constructor(e,t,r,i,n){const{trimTagLeft:o,trimTagRight:s,tagDelimiterLeft:a,tagDelimiterRight:c}=i,l=e.slice(t+a.length,r-c.length);super(Ut.Tag,l,e,t,r,o,s,n);const u=new Mr(this.content,i.operatorsTrie);if(this.name=u.readTagName(),!this.name)throw new zt("illegal tag syntax",this);u.skipBlank(),this.args=u.remaining()}}class Vr{constructor(e,t){this.handlers={},this.stopRequested=!1,this.tokens=e,this.parseToken=t}on(e,t){return this.handlers[e]=t,this}trigger(e,t){const r=this.handlers[e];return!!r&&(r.call(this,t),!0)}start(){let e;for(this.trigger("start");!this.stopRequested&&(e=this.tokens.shift());){if(this.trigger("token",e))continue;if(Zt(e)&&this.trigger(`tag:${e.name}`,e))continue;const t=this.parseToken(e,this.tokens);this.trigger("template",t)}return this.stopRequested||this.trigger("end"),this}stop(){return this.stopRequested=!0,this}}class Br{constructor(e,t){this.hash={};const r=new Mr(e,{});for(const e of r.readHashes(t))this.hash[e.name.content]=e.value}*render(e){const t={};for(const r of Object.keys(this.hash))t[r]=void 0===this.hash[r]||(yield vr(this.hash[r],e));return t}}class Ir{constructor(e,t,r,i){this.name=e,this.impl=t||De,this.args=r,this.liquid=i}*render(e,t){const r=[];for(const e of this.args)je(e)?r.push([e[0],yield vr(e[1],t)]):r.push(yield vr(e,t));return this.impl.apply({context:t,liquid:this.liquid},[e,...r])}}class $r{constructor(e,t){this.filters=[];const r=new Mr(e,t.options.operatorsTrie);this.initial=r.readExpression(),this.filters=r.readFilters().map((({name:e,args:r})=>new Ir(e,t.filters.get(e),r,t)))}*value(e,t){t=t||e.opts.lenientIf&&this.filters.length>0&&"default"===this.filters[0].name;let r=yield this.initial.evaluate(e,t);for(const t of this.filters)r=yield t.render(r,e);return r}}var Hr={parse:function(e){const t=new Mr(e.args,this.liquid.options.operatorsTrie);this.key=t.readIdentifier().content,t.skipBlank(),Wt("="===t.peek(),(()=>`illegal token ${e.getText()}`)),t.advance(),this.value=new $r(t.remaining(),this.liquid)},render:function*(e){e.bottom()[this.key]=yield this.value.value(e,this.liquid.options.lenientIf)}};class Wr extends ve{constructor(e,t,r){super(),this.i=0,this.length=e,this.name=`${r}-${t}`}next(){this.i++}index0(){return this.i}index(){return this.i+1}first(){return 0===this.i}last(){return this.i===this.length-1}rindex(){return this.length-this.i}rindex0(){return this.length-this.i-1}valueOf(){return JSON.stringify(this)}}const Ur=["offset","limit","reversed"];var Jr={type:"block",parse:function(e,t){const r=new Mr(e.args,this.liquid.options.operatorsTrie),i=r.readIdentifier(),n=r.readIdentifier(),o=r.readValue();let s;Wt(i.size()&&"in"===n.content&&o,(()=>`illegal tag: ${e.getText()}`)),this.variable=i.content,this.collection=o,this.hash=new Br(r.remaining()),this.templates=[],this.elseTemplates=[];const a=this.liquid.parser.parseStream(t).on("start",(()=>s=this.templates)).on("tag:else",(()=>s=this.elseTemplates)).on("tag:endfor",(()=>a.stop())).on("template",(e=>s.push(e))).on("end",(()=>{throw new Error(`tag ${e.getText()} not closed`)}));a.start()},render:function*(e,t){const r=this.liquid.renderer;let i=ht(yield vr(this.collection,e));if(!i.length)return void(yield r.renderTemplates(this.elseTemplates,e,t));const n="continue-"+this.variable+"-"+this.collection.getText();e.push({continue:e.getRegister(n)});const o=yield this.hash.render(e);e.pop();i=(this.liquid.options.orderedFilterParameters?Object.keys(o).filter((e=>Ur.includes(e))):Ur.filter((e=>void 0!==o[e]))).reduce(((e,t)=>{return"offset"===t?(r=e,i=o.offset,r.slice(i)):"limit"===t?function(e,t){return e.slice(0,t)}(e,o.limit):function(e){return[...e].reverse()}(e);var r,i}),i),e.setRegister(n,(o.offset||0)+i.length);const s={forloop:new Wr(i.length,this.collection.getText(),this.variable)};e.push(s);for(const n of i){if(s[this.variable]=n,yield r.renderTemplates(this.templates,e,t),t.break){t.break=!1;break}t.continue=!1,s.forloop.next()}e.pop()}};var Yr={parse:function(e,t){const r=new Mr(e.args,this.liquid.options.operatorsTrie);this.variable=function(e){const t=e.readIdentifier().content;if(t)return t;const r=e.readQuoted();if(r)return yr(r)}(r),Wt(this.variable,(()=>`${e.args} not valid identifier`)),this.templates=[];const i=this.liquid.parser.parseStream(t);i.on("tag:endcapture",(()=>i.stop())).on("template",(e=>this.templates.push(e))).on("end",(()=>{throw new Error(`tag ${e.getText()} not closed`)})),i.start()},render:function*(e){const t=this.liquid.renderer,r=yield t.renderTemplates(this.templates,e);e.bottom()[this.variable]=r}};var Qr,Xr={parse:function(e,t){this.cond=new $r(e.args,this.liquid),this.cases=[],this.elseTemplates=[];let r=[];const i=this.liquid.parser.parseStream(t).on("tag:when",(e=>{r=[];const t=new Mr(e.args,this.liquid.options.operatorsTrie);for(;!t.end();){const e=t.readValue();this.cases.push({val:e,templates:r}),t.readTo(",")}})).on("tag:else",(()=>r=this.elseTemplates)).on("tag:endcase",(()=>i.stop())).on("template",(e=>r.push(e))).on("end",(()=>{throw new Error(`tag ${e.getText()} not closed`)}));i.start()},render:function*(e,t){const r=this.liquid.renderer,i=qe(yield this.cond.value(e,e.opts.lenientIf));for(const n of this.cases){if((yield vr(n.val,e,e.opts.lenientIf))===i)return void(yield r.renderTemplates(n.templates,e,t))}yield r.renderTemplates(this.elseTemplates,e,t)}},Gr={parse:function(e,t){const r=this.liquid.parser.parseStream(t);r.on("token",(e=>{"endcomment"===e.name&&r.stop()})).on("end",(()=>{throw new Error(`tag ${e.getText()} not closed`)})),r.start()}};!function(e){e[e.OUTPUT=0]="OUTPUT",e[e.STORE=1]="STORE"}(Qr||(Qr={}));var Zr=Qr,Kr={parseFilePath:ei,renderFilePath:ri,parse:function(e){const t=e.args,r=new Mr(t,this.liquid.options.operatorsTrie);for(this.file=this.parseFilePath(r,this.liquid),this.currentFile=e.file;!r.end();){r.skipBlank();const e=r.p,t=r.readIdentifier();if(("with"===t.content||"for"===t.content)&&(r.skipBlank(),":"!==r.peek())){const e=r.readValue();if(e){const i=r.p;let n;"as"===r.readIdentifier().content?n=r.readIdentifier():r.p=i,this[t.content]={value:e,alias:n&&n.content},r.skipBlank(),","===r.peek()&&r.advance();continue}}r.p=e;break}this.hash=new Br(r.remaining())},render:function*(e,t){const{liquid:r,hash:i}=this,n=yield this.renderFilePath(this.file,e,r);Wt(n,(()=>`illegal filename "${n}"`));const o=new wi({},e.opts,{sync:e.sync,globals:e.globals,strictVariables:e.strictVariables}),s=o.bottom();if(me(s,yield i.render(e)),this.with){const{value:t,alias:r}=this.with;s[r||n]=yield vr(t,e)}if(this.for){const{value:i,alias:a}=this.for;let c=yield vr(i,e);c=ht(c),s.forloop=new Wr(c.length,i.getText(),a);for(const e of c){s[a]=e;const i=yield r._parsePartialFile(n,o.sync,this.currentFile);yield r.renderer.renderTemplates(i,o,t),s.forloop.next()}}else{const e=yield r._parsePartialFile(n,o.sync,this.currentFile);yield r.renderer.renderTemplates(e,o,t)}}};function ei(e,t){if(t.options.dynamicPartials){const r=e.readValue();if(void 0===r)throw new TypeError(`illegal argument "${e.input}"`);if("none"===r.getText())return null;if(Kt(r)){return ti(t.parse(yr(r)))}return r}const r=[...e.readFileNameTemplate(t.options)],i=ti(t.parser.parseTokens(r));return"none"===i?null:i}function ti(e){return 1===e.length&&Xt(e[0].token)?e[0].token.getContent():e}function*ri(e,t,r){return"string"==typeof e?e:Array.isArray(e)?r.renderer.renderTemplates(e,t):yield vr(e,t)}var ii={parseFilePath:ei,renderFilePath:ri,parse:function(e){const t=e.args,r=new Mr(t,this.liquid.options.operatorsTrie);this.file=this.parseFilePath(r,this.liquid),this.currentFile=e.file;const i=r.p;"with"===r.readIdentifier().content?(r.skipBlank(),":"!==r.peek()?this.withVar=r.readValue():r.p=i):r.p=i,this.hash=new Br(r.remaining(),this.liquid.options.jekyllInclude)},render:function*(e,t){const{liquid:r,hash:i,withVar:n}=this,{renderer:o}=r,s=yield this.renderFilePath(this.file,e,r);Wt(s,(()=>`illegal filename "${s}"`));const a=e.saveRegister("blocks","blockMode");e.setRegister("blocks",{}),e.setRegister("blockMode",Zr.OUTPUT);const c=yield i.render(e);n&&(c[s]=yield vr(n,e));const l=yield r._parsePartialFile(s,e.sync,this.currentFile);e.push(e.opts.jekyllInclude?{include:c}:c),yield o.renderTemplates(l,e,t),e.pop(),e.restoreRegister(a)}},ni={parse:function(e){const t=new Mr(e.args,this.liquid.options.operatorsTrie);this.variable=t.readIdentifier().content},render:function(e,t){const r=e.environments;Oe(r[this.variable])||(r[this.variable]=0),t.write(Te(--r[this.variable]))}},oi={parse:function(e){const t=new Mr(e.args,this.liquid.options.operatorsTrie),r=t.readValue();for(t.skipBlank(),this.candidates=[],r&&(":"===t.peek()?(this.group=r,t.advance()):this.candidates.push(r));!t.end();){const e=t.readValue();e&&this.candidates.push(e),t.readTo(",")}Wt(this.candidates.length,(()=>`empty candidates: ${e.getText()}`))},render:function*(e,t){const r=`cycle:${yield vr(this.group,e)}:`+this.candidates.join(","),i=e.getRegister("cycle");let n=i[r];void 0===n&&(n=i[r]=0);const o=this.candidates[n];n=(n+1)%this.candidates.length,i[r]=n;const s=yield vr(o,e);t.write(s)}},si={parse:function(e,t){let r;this.branches=[],this.elseTemplates=[],this.liquid.parser.parseStream(t).on("start",(()=>this.branches.push({predicate:new $r(e.args,this.liquid),templates:r=[]}))).on("tag:elsif",(e=>this.branches.push({predicate:new $r(e.args,this.liquid),templates:r=[]}))).on("tag:else",(()=>r=this.elseTemplates)).on("tag:endif",(function(){this.stop()})).on("template",(e=>r.push(e))).on("end",(()=>{throw new Error(`tag ${e.getText()} not closed`)})).start()},render:function*(e,t){const r=this.liquid.renderer;for(const{predicate:i,templates:n}of this.branches){if(Je(yield i.value(e,e.opts.lenientIf),e))return void(yield r.renderTemplates(n,e,t))}yield r.renderTemplates(this.elseTemplates,e,t)}},ai={parse:function(e){const t=new Mr(e.args,this.liquid.options.operatorsTrie);this.variable=t.readIdentifier().content},render:function(e,t){const r=e.environments;Oe(r[this.variable])||(r[this.variable]=0);const i=r[this.variable];r[this.variable]++,t.write(Te(i))}},ci={parseFilePath:ei,renderFilePath:ri,parse:function(e,t){const r=new Mr(e.args,this.liquid.options.operatorsTrie);this.file=this.parseFilePath(r,this.liquid),this.currentFile=e.file,this.hash=new Br(r.remaining()),this.tpls=this.liquid.parser.parseTokens(t)},render:function*(e,t){const{liquid:r,hash:i,file:n}=this,{renderer:o}=r;if(null===n)return e.setRegister("blockMode",Zr.OUTPUT),void(yield o.renderTemplates(this.tpls,e,t));const s=yield this.renderFilePath(this.file,e,r);Wt(s,(()=>`illegal filename "${s}"`));const a=yield r._parseLayoutFile(s,e.sync,this.currentFile);e.setRegister("blockMode",Zr.STORE);const c=yield o.renderTemplates(this.tpls,e),l=e.getRegister("blocks");void 0===l[""]&&(l[""]=(e,t)=>t.write(c)),e.setRegister("blockMode",Zr.OUTPUT),e.push(yield i.render(e)),yield o.renderTemplates(a,e,t),e.pop()}};class li extends ve{constructor(e=(()=>"")){super(),this.superBlockRender=e}super(){return this.superBlockRender()}}var ui={parse(e,t){const r=/\w+/.exec(e.args);this.block=r?r[0]:"",this.tpls=[],this.liquid.parser.parseStream(t).on("tag:endblock",(function(){this.stop()})).on("template",(e=>this.tpls.push(e))).on("end",(()=>{throw new Error(`tag ${e.getText()} not closed`)})).start()},*render(e,t){const r=this.getBlockRender(e);e.getRegister("blockMode")===Zr.STORE?e.getRegister("blocks")[this.block]=r:yield r(new li,t)},getBlockRender(e){const{liquid:t,tpls:r}=this,i=e.getRegister("blocks")[this.block],n=function*(i,n){e.push({block:i}),yield t.renderer.renderTemplates(r,e,n),e.pop()};return i?(e,t)=>i(new li((()=>n(e,t))),t):n}},di={parse:function(e,t){this.tokens=[];const r=this.liquid.parser.parseStream(t);r.on("token",(e=>{"endraw"===e.name?r.stop():this.tokens.push(e)})).on("end",(()=>{throw new Error(`tag ${e.getText()} not closed`)})),r.start()},render:function(){return this.tokens.map((e=>e.getText())).join("")}};class pi extends Wr{constructor(e,t,r,i){super(e,r,i),this.length=e,this.cols=t}row(){return Math.floor(this.i/this.cols)+1}col0(){return this.i%this.cols}col(){return this.col0()+1}col_first(){return 0===this.col0()}col_last(){return this.col()===this.cols}}var hi={parse:function(e,t){const r=new Mr(e.args,this.liquid.options.operatorsTrie),i=r.readIdentifier();r.skipBlank();const n=r.readIdentifier();let o;Wt(n&&"in"===n.content,(()=>`illegal tag: ${e.getText()}`)),this.variable=i.content,this.collection=r.readValue(),this.hash=new Br(r.remaining()),this.templates=[];const s=this.liquid.parser.parseStream(t).on("start",(()=>o=this.templates)).on("tag:endtablerow",(()=>s.stop())).on("template",(e=>o.push(e))).on("end",(()=>{throw new Error(`tag ${e.getText()} not closed`)}));s.start()},render:function*(e,t){let r=ht(yield vr(this.collection,e));const i=yield this.hash.render(e),n=i.offset||0,o=void 0===i.limit?r.length:i.limit;r=r.slice(n,n+o);const s=i.cols||r.length,a=this.liquid.renderer,c=new pi(r.length,s,this.collection.getText(),this.variable),l={tablerowloop:c};e.push(l);for(let i=0;i<r.length;i++,c.next())l[this.variable]=r[i],0===c.col0()&&(1!==c.row()&&t.write("</tr>"),t.write(`<tr class="row${c.row()}">`)),t.write(`<td class="col${c.col()}">`),yield a.renderTemplates(this.templates,e,t),t.write("</td>");r.length&&t.write("</tr>"),e.pop()}};const fi={assign:Hr,for:Jr,capture:Yr,case:Xr,comment:Gr,include:ii,render:Kr,decrement:ni,increment:ai,cycle:oi,if:si,layout:ci,block:ui,raw:di,tablerow:hi,unless:{parse:function(e,t){let r;this.branches=[],this.elseTemplates=[],this.liquid.parser.parseStream(t).on("start",(()=>this.branches.push({predicate:new $r(e.args,this.liquid),test:Ye,templates:r=[]}))).on("tag:elsif",(e=>this.branches.push({predicate:new $r(e.args,this.liquid),test:Je,templates:r=[]}))).on("tag:else",(()=>r=this.elseTemplates)).on("tag:endunless",(function(){this.stop()})).on("template",(e=>r.push(e))).on("end",(()=>{throw new Error(`tag ${e.getText()} not closed`)})).start()},render:function*(e,t){const r=this.liquid.renderer;for(const{predicate:i,test:n,templates:o}of this.branches){if(n(yield i.value(e,e.opts.lenientIf),e))return void(yield r.renderTemplates(o,e,t))}yield r.renderTemplates(this.elseTemplates,e,t)}},break:{render:function(e,t){t.break=!0}},continue:{render:function(e,t){t.continue=!0}},echo:{parse:function(e){this.value=new $r(e.args,this.liquid)},render:function*(e,t){const r=yield this.value.value(e,!1);t.write(r)}},liquid:{parse:function(e){const t=new Mr(e.args,this.liquid.options.operatorsTrie).readLiquidTagTokens(this.liquid.options);this.tpls=this.liquid.parser.parseTokens(t)},render:function*(e,t){yield this.liquid.renderer.renderTemplates(this.tpls,e,t)}},"#":{parse:function(e,t){if(-1!==e.args.search(/\n\s*[^#\s]/g))throw new Error("every line of an inline comment must start with a '#' character")}}};const mi=new Map;Pe(Jt,((e,t)=>{mi.set(Me(t),e)}));const gi={root:["."],layouts:["."],partials:["."],relativeReference:!0,jekyllInclude:!1,cache:void 0,extname:"",fs:We,dynamicPartials:!0,jsTruthy:!1,trimTagRight:!1,trimTagLeft:!1,trimOutputRight:!1,trimOutputLeft:!1,greedy:!0,tagDelimiterLeft:"{%",tagDelimiterRight:"%}",outputDelimiterLeft:"{{",outputDelimiterRight:"}}",preserveTimezones:!1,strictFilters:!1,strictVariables:!1,ownPropertyOnly:!1,lenientIf:!1,globals:{},keepOutputType:!1,operators:Qe,operatorsTrie:et(Qe)};function vi(e){if(e.hasOwnProperty("operators")&&(e.operatorsTrie=et(e.operators)),e.hasOwnProperty("root")&&(e.hasOwnProperty("partials")||(e.partials=e.root),e.hasOwnProperty("layouts")||(e.layouts=e.root)),e.hasOwnProperty("cache")){let t;t="number"==typeof e.cache?e.cache>0?new $e(e.cache):void 0:"object"==typeof e.cache?e.cache:e.cache?new $e(1024):void 0,e.cache=t}return!(e=Object.assign(Object.assign(Object.assign({},gi),e.jekyllInclude?{dynamicPartials:!1}:{}),e)).fs.dirname&&e.relativeReference&&(console.warn("[LiquidJS] `fs.dirname` is required for relativeReference, set relativeReference to `false` to suppress this warning, or provide implementation for `fs.dirname`"),e.relativeReference=!1),e.root=yi(e.root),e.partials=yi(e.partials),e.layouts=yi(e.layouts),e.outputEscape=e.outputEscape&&function(e){if(_e(e)){const t=mi.get(e);return Wt(Se(t),`filter "${e}" not found`),t}return Wt(Se(e),"`outputEscape` need to be of type string or function"),e}(e.outputEscape),e}function yi(e){let t=[];return je(e)&&(t=e),_e(e)&&(t=[e]),t}class wi{constructor(e={},t=gi,r={}){var i,n;this.scopes=[{}],this.registers={},this.sync=!!r.sync,this.opts=t,this.globals=null!==(i=r.globals)&&void 0!==i?i:t.globals,this.environments=e,this.strictVariables=null!==(n=r.strictVariables)&&void 0!==n?n:this.opts.strictVariables}getRegister(e){return this.registers[e]=this.registers[e]||{}}setRegister(e,t){return this.registers[e]=t}saveRegister(...e){return e.map((e=>[e,this.getRegister(e)]))}restoreRegister(e){return e.forEach((([e,t])=>this.setRegister(e,t)))}getAll(){return[this.globals,this.environments,...this.scopes].reduce(((e,t)=>me(e,t)),{})}get(e){return mr(this._get(e))}*_get(e){const t=this.findScope(e[0]);return yield this._getFromScope(t,e)}getFromScope(e,t){return mr(this._getFromScope(e,t))}*_getFromScope(e,t){_e(t)&&(t=t.split("."));for(let r=0;r<t.length;r++)if(Le(e=yield bi(e,t[r],this.opts.ownPropertyOnly))&&this.strictVariables)throw new $t(t.slice(0,r+1).join("."));return e}push(e){return this.scopes.push(e)}pop(){return this.scopes.pop()}bottom(){return this.scopes[0]}findScope(e){for(let t=this.scopes.length-1;t>=0;t--){const r=this.scopes[t];if(e in r)return r}return e in this.environments?this.environments:this.globals}}function bi(e,t,r){if(Le(e))return e;if(je(e=Ee(e))&&t<0)return e[e.length+ +t];const i=function(e,t,r){return r&&!Object.hasOwnProperty.call(e,t)?void 0:e[t]}(e,t,r);return void 0===i&&e instanceof ve?e.liquidMethodMissing(t):Se(i)?i.call(e):"size"===t?function(e){if(e.hasOwnProperty("size")||void 0!==e.size)return e.size;if(je(e)||_e(e))return e.length;if("object"==typeof e)return Object.keys(e).length}(e):"first"===t?function(e){return je(e)?e[0]:e.first}(e):"last"===t?function(e){return je(e)?e[e.length-1]:e.last}(e):i}var _i;!function(e){e.Partials="partials",e.Layouts="layouts",e.Root="root"}(_i||(_i={}));class Si{constructor(e){if(this.options=e,e.relativeReference){const t=e.fs.sep;Wt(t,"`fs.sep` is required for relative reference");const r=new RegExp(["."+t,".."+t,"./","../"].map((e=>e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))).join("|"));this.shouldLoadRelative=e=>r.test(e)}else this.shouldLoadRelative=e=>!1;this.contains=this.options.fs.contains||(()=>!0)}*lookup(e,t,r,i){const{fs:n}=this.options,o=this.options[t];for(const s of this.candidates(e,o,i,t!==_i.Root))if(r?n.existsSync(s):yield n.exists(s))return s;throw this.lookupError(e,o)}*candidates(e,t,r,i){const{fs:n,extname:o}=this.options;if(this.shouldLoadRelative(e)&&r){const s=n.resolve(this.dirname(r),e,o);for(const e of t)if(!i||this.contains(e,s)){yield s;break}}for(const r of t){const t=n.resolve(r,e,o);i&&!this.contains(r,t)||(yield t)}if(void 0!==n.fallback){const t=n.fallback(e);void 0!==t&&(yield t)}}dirname(e){const t=this.options.fs;return Wt(t.dirname,"`fs.dirname` is required for relative reference"),t.dirname(e)}lookupError(e,t){const r=new Error("ENOENT");return r.message=`ENOENT: Failed to lookup "${e}" in "${t}"`,r.code="ENOENT",r}}class ki{constructor(){this.buffer=""}write(e){this.buffer+=Te(e)}}class xi{constructor(){throw this.buffer="",this.stream=null,new Error("streaming not supported in browser")}}class Ti{constructor(){this.buffer=""}write(e){"string"!=typeof(e=qe(e))&&""===this.buffer?this.buffer=e:this.buffer=Te(this.buffer)+Te(e)}}class qi{renderTemplatesToNodeStream(e,t){const r=new xi;return Promise.resolve().then((()=>fr(this.renderTemplates(e,t,r)))).then((()=>r.end()),(e=>r.error(e))),r.stream}*renderTemplates(e,t,r){r||(r=t.opts.keepOutputType?new Ti:new ki);for(const i of e)try{const e=yield i.render(t,r);if(e&&r.write(e),r.break||r.continue)break}catch(e){throw Bt.is(e)?e:new Bt(e,i)}return r.buffer}}class Oi{constructor(e){this.token=e}}class Ei extends Oi{constructor(e,t,r){super(e),this.name=e.name;const i=r.tags.get(e.name);this.impl=Object.create(i),this.impl.liquid=r,this.impl.parse&&this.impl.parse(e,t)}*render(e,t){const r=yield new Br(this.token.args).render(e),i=this.impl;if(Se(i.render))return yield i.render(e,t,r)}}class Li extends Oi{constructor(e,t){super(e),this.value=new $r(e.content,t);const r=this.value.filters,i=t.options.outputEscape;r.length&&"raw"===r[r.length-1].name?r.pop():i&&r.push(new Ir(toString.call(i),i,[],t))}*render(e,t){const r=yield this.value.value(e,!1);t.write(r)}}class ji extends Oi{constructor(e){super(e),this.str=e.getContent()}*render(e,t){t.write(this.str)}}class Pi{constructor(e){this.liquid=e,this.cache=this.liquid.options.cache,this.fs=this.liquid.options.fs,this.parseFile=this.cache?this._parseFileCached:this._parseFile,this.loader=new Si(this.liquid.options)}parse(e,t){const r=new Mr(e,this.liquid.options.operatorsTrie,t).readTopLevelTokens(this.liquid.options);return this.parseTokens(r)}parseTokens(e){let t;const r=[];for(;t=e.shift();)r.push(this.parseToken(t,e));return r}parseToken(e,t){try{return Zt(e)?new Ei(e,t,this.liquid):Gt(e)?new Li(e,this.liquid):new ji(e)}catch(t){throw new Vt(t,e)}}parseStream(e){return new Vr(e,((e,t)=>this.parseToken(e,t)))}*_parseFileCached(e,t,r=_i.Root,i){const n=this.cache,o=this.loader.shouldLoadRelative(e)?i+","+e:r+":"+e,s=yield n.read(o);if(s)return s;const a=this._parseFile(e,t,r,i),c=t?yield a:fr(a);n.write(o,c);try{return yield c}catch(e){throw n.remove(o),e}}*_parseFile(e,t,r=_i.Root,i){const n=yield this.loader.lookup(e,r,t,i);return this.liquid.parse(t?this.fs.readFileSync(n):yield this.fs.readFile(n),n)}}class Ai{constructor(){this.impls={}}get(e){const t=this.impls[e];return Wt(t,(()=>`tag "${e}" not found`)),t}set(e,t){this.impls[e]=t}}class Ni{constructor(e,t){this.strictFilters=e,this.liquid=t,this.impls={}}get(e){const t=this.impls[e];return Wt(t||!this.strictFilters,(()=>`undefined filter: ${e}`)),t}set(e,t){this.impls[e]=t}create(e,t){return new Ir(e,this.get(e),t,this.liquid)}}class Fi{constructor(e={}){this.options=vi(e),this.parser=new Pi(this),this.renderer=new qi,this.filters=new Ni(this.options.strictFilters,this),this.tags=new Ai,Pe(fi,((e,t)=>this.registerTag(Me(t),e))),Pe(Jt,((e,t)=>this.registerFilter(Me(t),e)))}parse(e,t){return this.parser.parse(e,t)}_render(e,t,r){const i=new wi(t,this.options,r);return this.renderer.renderTemplates(e,i)}render(e,t,r){return ge(this,void 0,void 0,(function*(){return fr(this._render(e,t,Object.assign(Object.assign({},r),{sync:!1})))}))}renderSync(e,t,r){return mr(this._render(e,t,Object.assign(Object.assign({},r),{sync:!0})))}renderToNodeStream(e,t,r={}){const i=new wi(t,this.options,r);return this.renderer.renderTemplatesToNodeStream(e,i)}_parseAndRender(e,t,r){const i=this.parse(e);return this._render(i,t,r)}parseAndRender(e,t,r){return ge(this,void 0,void 0,(function*(){return fr(this._parseAndRender(e,t,Object.assign(Object.assign({},r),{sync:!1})))}))}parseAndRenderSync(e,t,r){return mr(this._parseAndRender(e,t,Object.assign(Object.assign({},r),{sync:!0})))}_parsePartialFile(e,t,r){return this.parser.parseFile(e,t,_i.Partials,r)}_parseLayoutFile(e,t,r){return this.parser.parseFile(e,t,_i.Layouts,r)}parseFile(e){return ge(this,void 0,void 0,(function*(){return fr(this.parser.parseFile(e,!1))}))}parseFileSync(e){return mr(this.parser.parseFile(e,!0))}renderFile(e,t,r){return ge(this,void 0,void 0,(function*(){const i=yield this.parseFile(e);return this.render(i,t,r)}))}renderFileSync(e,t,r){const i=this.parseFileSync(e);return this.renderSync(i,t,r)}renderFileToNodeStream(e,t,r){return ge(this,void 0,void 0,(function*(){const i=yield this.parseFile(e);return this.renderToNodeStream(i,t,r)}))}_evalValue(e,t){const r=new $r(e,this),i=t instanceof wi?t:new wi(t,this.options);return r.value(i,!1)}evalValue(e,t){return ge(this,void 0,void 0,(function*(){return fr(this._evalValue(e,t))}))}evalValueSync(e,t){return mr(this._evalValue(e,t))}registerFilter(e,t){this.filters.set(e,t)}registerTag(e,t){this.tags.set(e,t)}plugin(e){return e.call(this,Fi)}express(){const e=this;let t=!0;return function(r,i,n){if(t){t=!1;const r=yi(this.root);e.options.root.unshift(...r),e.options.layouts.unshift(...r),e.options.partials.unshift(...r)}e.renderFile(r,i).then((e=>n(null,e)),n)}}}function Ri(){return Ri="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zi(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Ri.apply(this,arguments)}function Ci(e,t){return Ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ci(e,t)}function Di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=zi(e);if(t){var n=zi(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===Vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mi(e)}(this,r)}}function Mi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zi(e){return zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zi(e)}function Vi(e){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vi(e)}function Bi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ii(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,o=void 0,o=function(e,t){if("object"!==Vi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==Vi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===Vi(o)?o:String(o)),i)}var n,o}function $i(e,t,r){return t&&Ii(e.prototype,t),r&&Ii(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Hi,Wi=function(){function e(t,r,i){Bi(this,e),this.availableVariants=[],this.currentSelected={},this.optionWithValues=i,this.stock={},this.swatchWrapperSel=r,this.productData=t}return $i(e,[{key:"init",value:function(){this.stock=this.createStock(),this.getAvailableVariants(),this.initStock(),this.addSwatchEvent(),this.selectOnInit()}},{key:"createStock",value:function(){var e={};return this.optionWithValues.forEach((function(t){e[t.name]={}})),e}},{key:"initStock",value:function(){var e=this;this.availableVariants.forEach((function(t){Object.keys(e.stock).forEach((function(r){e.stock[r][t[r]]=!0}))}))}},{key:"doSelect",value:function(e,t){var r=this;this.currentSelected[e]=t;var i=this.createStock();i[e]=this.stock[e],this.stock=i;var n=Object.keys(this.stock);this.availableVariants.forEach((function(t){n.forEach((function(i){if(e!==i){for(var o=0;o<n.length;o++){var s=n[o];if(s!==i&&(r.currentSelected[s]&&t[s]!==r.currentSelected[s]))return}r.stock[i][t[i]]=!0}}))}))}},{key:"disableSwatch",value:function(){var e=this;this.swatchWrapperSel.querySelectorAll(".vario-variants").forEach((function(t,r){t.querySelectorAll(".vario-variant").forEach((function(r){var i=r.getAttribute("data-value"),n=(r.getAttribute("data-position"),t.getAttribute("data-variant-name"));if(e.stock[n][i])r.classList.remove("vario-disabled","vario-disabled-grayscale","vario-disabled-hidden");else if(varioCustomizer.sold_out.show_sold_out_variants)"gray-out"===varioCustomizer.sold_out.style&&r.classList.add("vario-disabled-grayscale"),"cross"===varioCustomizer.sold_out.style&&r.classList.add("vario-disabled");else{if(!varioCustomizer.sold_out.show_sold_out_variants&&e.currentSelected[n]===i)return;r.classList.add("vario-disabled-hidden")}}))}))}},{key:"getAvailableVariants",value:function(){var e=this;this.productData.variants.forEach((function(t){if(t.available){var r={};e.optionWithValues.forEach((function(e,i){r[e.name]=t["option".concat(i+1)]})),e.availableVariants.push(r)}}))}},{key:"isNotExistVariant",value:function(e){var t=this;return this.optionWithValues.some((function(r,i){return t.currentSelected[r.name]!=e["option".concat(i+1)]}))}},{key:"addSwatchEvent",value:function(){var e=this;document.body.addEventListener("change",(function(t){var r=t.target,i=(parseInt(r.getAttribute("data-position")),r.value),n=r.getAttribute("data-variant-name"),o=t.target.closest(".vario-all-variant-wrapper");e.swatchWrapperSel.contains(r)&&r.classList.contains("vario-variants")&&(r.closest(".vario-variant-wrapper").querySelector(".vario-variant-selected").innerText=r.value,e.doSelect(n,i),e.disableSwatch(),o.dispatchEvent(new CustomEvent("vario-swatch-selected",{bubbles:!0,detail:{swatchWrapperSel:e.swatchWrapperSel,selectSel:r,currentVariant:e.findCurrentVariant(),swatchInstance:e,element:this}})))})),document.body.addEventListener("click",(function(t){var r=t.target.closest("li.vario-variant"),i=t.target.closest("ul.vario-variants"),n=t.target.closest(".vario-variant-wrapper"),o=t.target.closest(".vario-all-variant-wrapper");if(e.swatchWrapperSel.contains(i)&&r){var s=r.getAttribute("data-value"),a=(parseInt(r.getAttribute("data-position")),n.getAttribute("data-variant-name"));e.doSelect(a,s),r.closest(".vario-variant-wrapper").querySelector(".vario-variant-selected").innerText=s;var c=i.querySelector(".sv_active");c&&c.classList.remove("sv_active"),r.classList.add("sv_active"),e.disableSwatch(),o.dispatchEvent(new CustomEvent("vario-swatch-clicked",{bubbles:!0,detail:{swatchWrapperSel:e.swatchWrapperSel,ulSel:i,liSel:r,currentVariant:e.findCurrentVariant(),swatchInstance:e,element:this}}))}}))}},{key:"findCurrentVariant",value:function(){var e=this;return this.productData.variants.find((function(t){return t.available&&!e.isNotExistVariant(t)}))}},{key:"selectOnInit",value:function(){var e=this;this.swatchWrapperSel.querySelectorAll(".vario-variants").forEach((function(t,r){var i=t.getAttribute("data-variant-name");"SELECT"==t.nodeName?e.currentSelected[i]&&(t.value=e.currentSelected[i],Object.values(t.options).forEach((function(r){r.value==e.currentSelected[i]&&(r.selected="selected",e.doSelect(i,e.currentSelected[i]),t.closest(".vario-variant-wrapper").querySelector(".vario-variant-selected").innerText=e.currentSelected[i])}))):t.querySelectorAll(".vario-variant").forEach((function(t){t.getAttribute("data-value")!=e.currentSelected[i]||t.classList.contains("vario-plus-btn")?t.classList.remove("sv_active"):(e.doSelect(i,e.currentSelected[i]),t.classList.add("sv_active"),t.closest(".vario-variant-wrapper").querySelector(".vario-variant-selected").innerText=e.currentSelected[i])}))}))}}]),e}(),Ui=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ci(e,t)}(r,e);var t=Di(r);function r(e,i,n){var o;return Bi(this,r),(o=t.call(this)).currentVariantId=null,o.formSelector=null,o.selectors={singleOptionSelector:".swatches__holder select, select.Form__Select, select.single-option-selector,.options-selection__input-select,.product__variant,.select-wrapper>select,.form__input--select,.product-option-select select,.selector-wrapper select,.form-element-select select,.product-form__option-select,.pf-element select,select.option-selector,.product-details__option-wrapper select,.product-form__input select,select.pf-variant-select,select.product-form__input,select.form-control,select.product-option.custom-select,.variant-input-wrap>select,select.product-option-value-item,#product-variants>select#product-selectors,.product-variant select.product-variant-container",radioSelectors:'variant-radios input[type="radio"], .single-option-selector .bcpo-image-parent input[type="radio"], .swatch-items-wrapper > .swatch-element input[type="radio"], .BlockSwatchList input[type="radio"], .option-selector__btns input[type="radio"].opt-btn.js-option, input[type="radio"].single-option-selector__radio,input[type="radio"].variant-input,input.form-check-input[type="radio"],input.product-variant__input[type="radio"],input.product-form__single-selector[type="radio"],.radio__fieldset input[type="radio"],input.swatch__input[type="radio"],.swatch-element input[type="radio"],input.option-value-input[type="radio"],input.radios--input[type="radio"],input.single-option-selector[type="radio"],.form-swatch-item input[type="radio"],.product-options input[type="radio"],.single-option-radio input[type="radio"],.product-form__input input[type="radio"],.pf-variant-radio input[type="radio"],input.single-option-selector-product-template[type="radio"],.options-selection__option-values input[type="radio"],.swatch__option input[type="radio"],input.ColorSwatch__Radio[type="radio"],.variant-input input[type="radio"],input.SizeSwatch__Radio[type="radio"],.radio-btn input[type="radio"]',customSelectors:".gf_swatches .gf_swatch, .product__swatches .swatches__holder span.swatch--color,.cc-select__option, .sf__variant-swatch > .product-option-item, .OptionSelector .Popover__Content .Popover__ValueList button.Popover__Value, input.disclosure--input,.js-option.active,.product__chip,.Popover__Value,.popout-list__option,.clickyboxes a,li.nt-swatch.swatch_pr_item",hideElements:".selector-wrapper,.radio-wrapper,fieldset,.options-selection__select-wrapper,.disclosure--root,.product-options[data-section-name],.js-enabled.product-form__option,.product-form__select,.product-option,.product-option-select,.product-variant,.variant-wrapper,.product-form__variants,.js-enabled,.swatch.selectors,.swatch_options,.ProductForm__Variants,.form-element-wrapper,.variant-group,.swatch,.product-single__swatches,.product-form--variants,.product__variants,.product-swatches,.product-options .option,.product-options,.swatches__container,.product-form-grid-select,.product-details__option-wrapper"},o.onSwatchClicked=o.onSwatchClicked.bind(Mi(o)),o.onSwatchSelected=o.onSwatchSelected.bind(Mi(o)),o}return $i(r,[{key:"init",value:function(){var e=this;this.productData=JSON.parse(document.querySelector("#vario-product-json").innerHTML),this.optionWithValues=window.vario_options_with_values,this.appendControl(this.productData).then((function(t){var i=document.querySelectorAll('form[action*="/cart/add"]');i.length>1?(e.formSelector=document.querySelector('form[action*="/cart/add"][data-product-form]'),!e.formSelector&&(e.formSelector=i[0])):e.formSelector=i[0],e.swatchWrapperSel=t,e.getCurrentOptions(),Ri(zi(r.prototype),"init",e).call(e),(varioCustomizer.sold_out.show_sold_out_variants||"automatic"===varioCustomizer.sold_out.hide_style)&&e.disableSwatch(),e.detectFormValueChanged(),t.parentNode.addEventListener("vario-swatch-clicked",e.onSwatchClicked),t.parentNode.addEventListener("vario-swatch-selected",e.onSwatchSelected),e.isMobile()||e.generateTooltip()}))}},{key:"isMobile",value:function(){var e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(e=!0),e}},{key:"detectFormValueChanged",value:function(){var e=this;if(this.formSelector){var t=this.formSelector.querySelector('select[name="id"], input[name="id"]');t&&t.addEventListener("change",(function t(r){var i=r.target.value;e.currentVariantId!=i&&(e.getCurrentOptions(),e.selectOnInit()),r.target.removeEventListener("change",t)}))}}},{key:"onSwatchClicked",value:function(e){var t=e.detail.liSel;this.triggerControlEvent(t.getAttribute("data-value"),parseInt(t.getAttribute("data-position")))}},{key:"onSwatchSelected",value:function(e){var t=e.detail.selectSel;this.triggerControlEvent(t.value,parseInt(t.getAttribute("data-position")))}},{key:"generateTooltip",value:function(){var e=document.querySelectorAll(".vario-variant[data-v-tooltip]");e&&e.forEach((function(e){var t=document.createElement("span");if("name"===varioCustomizer.swatches.hover_effect){t.classList.add("vario-variant-tip");t.appendChild(function(e){return document.createTextNode(e)}(e.getAttribute("data-value")))}else if("zoom"===varioCustomizer.swatches.hover_effect){t.classList.add("vario-variant-tip"),e.classList.add("vario-variant-zoom-tip");t.appendChild(function(e){return document.createTextNode(e)}(e.getAttribute("data-value")))}else if("image"===varioCustomizer.swatches.hover_effect){if(e.querySelector(".swatch-color")){t.classList.add("vario-variant-tip");t.appendChild(function(e){return document.createTextNode(e)}(e.getAttribute("data-value")))}else{t.classList.add("vario-variant-img-tip");var r=e.querySelector(".swatch-image");if(r){var i=r.style.backgroundImage,n=/\([\s\S]*\)/.exec(i)[0].replaceAll(/_50x|_120x|_360x|\(|\)|\"/gi,"");if(n){var o=document.createElement("img");o.width=150,o.height=150,o.alt="swatch image",o.src=n,t.appendChild(o)}var s=document.createElement("span");s.innerText=e.getAttribute("data-value"),t.appendChild(s)}}}document.body.appendChild(t);var a=8;"zoom"===varioCustomizer.swatches.hover_effect&&(a=14);var c=fe(e,t,{modifiers:[{name:"offset",options:{offset:[0,a]}}],placement:"undefined"!=typeof vario_tip_placement?vario_tip_placement:"top"});e.addEventListener("mouseenter",(function(){t.setAttribute("data-tip-show",""),c.update()})),e.addEventListener("mouseleave",(function(){t.removeAttribute("data-tip-show")}))}))}},{key:"triggerControlEvent",value:function(e,t){var r=this,i=document.querySelectorAll(this.selectors.singleOptionSelector);if(i.length){var n=Object.values(i).find((function(t){return Object.values(t.options).find((function(t){return t.value==e}))})),o=Object.values(i).filter((function(t){return Object.values(t).find((function(t){return t.value==e}))}));o.length&&(1==o.length?n&&(n.value=e)&&n.dispatchEvent(new Event("change",{bubbles:!0})):o[0]&&(o[0].value=e)&&o[0].dispatchEvent(new Event("change",{bubbles:!0}))),!n&&this.productData.variants.find((function(t){if(!r.isNotExistVariant(t)){var n=Object.values(i).find((function(r){return Object.values(r.options).find((function(r){return r.value==e||r.value==t.id}))}));n&&(n.value=t.id)&&n.dispatchEvent(new Event("change",{bubbles:!0}))}}))}var s=document.querySelectorAll(this.selectors.radioSelectors);if(s.length){var a=Object.values(s).filter((function(t){return t.value==e}));if(a.length)if(1==a.length)a[0]&&a[0].click();else{var c=a.find((function(e){return e.dataset.index=="option".concat(t+1)||e.dataset.optionPosition==t+1}));c&&c.click()}else this.productData.variants.forEach((function(e){if(!r.isNotExistVariant(e)){var t=Object.values(s).find((function(t){return t.value==e.id}));t&&t.click()}}))}var l=document.querySelectorAll(this.selectors.customSelectors);l.length&&l.forEach((function(t){t.parentNode.querySelector('[data-value="'.concat(e,'"]'))&&t.parentNode.querySelector('[data-value="'.concat(e,'"]')).click(),t.parentNode.querySelector('[data-button="'.concat(e,'"]'))&&t.parentNode.querySelector('[data-button="'.concat(e,'"]')).click(),t.parentNode.querySelector('[data-escape="'.concat(e,'"]'))&&t.parentNode.querySelector('[data-escape="'.concat(e,'"]')).click(),t.parentNode.querySelector('[data-swatch-option="'.concat(e,'"]'))&&t.parentNode.querySelector('[data-swatch-option="'.concat(e,'"]')).click()}))}},{key:"appendControl",value:function(e){var t=this,r=new DOMParser,i=document.querySelector("#vario-product-variant-template").innerHTML,n=new Fi;return n.registerFilter("img_url",(function(e,t,r){if(!e)return"";r=r||!1;var i=e.split(".").pop(),n=e.lastIndexOf(i)-1;return e.slice(0,n)+"_"+t+e.slice(n)})),new Promise((function(o,s){var a=n.parse(i);n.render(a,{product:e,options_with_values:window.vario_options_with_values,varioSettings:window.varioSettings}).then((function(e){var i=r.parseFromString(e,"text/html").querySelector(".vario-all-variant-wrapper");if("ab-sellerss.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] [data-key="p-quantity"]').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] [data-key="p-quantity"]')),void o(i);if("smack103.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product__swatches').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product__swatches')),void o(i);if("prynwan.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .main-product__block.main-product__block-short_description').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .main-product__block.main-product__block-short_description')),void o(i);if("officefurniturewarehouse.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-form__info-item.product-form__info-item--quantity').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-form__info-item.product-form__info-item--quantity')),void o(i);if("amaze-shoppeee.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-meta .jdgm-widget.jdgm-preview-badge').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-meta .jdgm-widget.jdgm-preview-badge')),void o(i);if("smartype-5660.myshopify.com"==Shopify.shop)return document.querySelector('form[id^="AddToCartForm').prepend(i),void o(i);if("luv-cobeauty.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .grid--uniform.product-single__addtocart').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .grid--uniform.product-single__addtocart')),void o(i);if("moonkie-shop.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-single__variants').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-single__variants')),void o(i);if("maxxofertas1.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"]').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"]')),void o(i);if("mariobemer.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .ProductMeta__ShareButtons').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .ProductMeta__ShareButtons')),void o(i);if("shop-junto.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .single_product__options').prepend(i),void o(i);if("emi-theory.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-form__variants').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-form__variants')),void o(i);if("helrym.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-description').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-description')),void o(i);if("lawrence-russel.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-info .product-single__variants').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-info .product-single__variants')),void o(i);if("jocafs-ab.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-swatches').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-swatches')),void o(i);if("dd-s-bridal-shop.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-form__controls-group').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-form__controls-group')),void o(i);if("tickingdepot.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-details__options')&&document.querySelector('form[action*="/cart/add"] .product-details__options').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-details__options')),void o(i);if("tkgky-nie.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-detail__quantity-row').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-detail__quantity-row')),void o(i);if("hello-sunny-day.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .original-selector').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .original-selector')),void o(i);if("db-custom-branding.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-form__variants').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-form__variants')),void o(i);if("amici-pelosetti-store.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"].product-single__form').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"].product-single__form')),void o(i);if("hawkins-woodshop.myshopify.com"==Shopify.shop)return document.querySelector('form[action*="/cart/add"] .product-form__variants').parentNode.insertBefore(i,document.querySelector('form[action*="/cart/add"] .product-form__variants')),void o(i);if("brightrsleep.myshopify.com"==Shopify.shop&&document.querySelector('[data-pf-type="ProductVariantSwatches"],[data-pf-type="ProductVariant"]'))return document.querySelector('[data-pf-type="ProductVariantSwatches"],[data-pf-type="ProductVariant"]').parentNode.insertBefore(i,document.querySelector('[data-pf-type="ProductVariantSwatches"],[data-pf-type="ProductVariant"]')),void o(i);if("earth-eden-brand.myshopify.com"==Shopify.shop&&document.querySelector(".product-form-option"))return document.querySelector(".product-form-option").parentNode.insertBefore(i,document.querySelector(".product-form-option")),void o(i);if("linions.myshopify.com"==Shopify.shop&&document.querySelector(".product-single__variants.product-form__item"))return document.querySelector(".product-single__variants.product-form__item").parentNode.insertBefore(i,document.querySelector(".product-single__variants.product-form__item")),void o(i);if("vilan-hotcutes.myshopify.com"==Shopify.shop&&document.querySelector(".product-swatches"))return document.querySelector(".product-swatches").parentNode.insertBefore(i,document.querySelector(".product-swatches")),void o(i);if("oppo-italia-store.myshopify.com"==Shopify.shop&&document.querySelector(".variants.clearfix"))return document.querySelector(".variants.clearfix").parentNode.insertBefore(i,document.querySelector(".variants.clearfix")),void o(i);if("clue22-com.myshopify.com"==Shopify.shop&&document.querySelector("div.product__text"))return document.querySelector("div.product__text").parentNode.insertBefore(i,document.querySelector("div.product__text").nextSibling),void o(i);if("customstore12569.myshopify.com"==Shopify.shop&&document.querySelector("#ProductPrice"))return document.querySelector("#ProductPrice").parentNode.insertBefore(i,document.querySelector("#ProductPrice").nextSibling),void o(i);if("tie-fly.myshopify.com"==Shopify.shop&&document.querySelector(".product-form__input.product-form__quantity"))return document.querySelector(".product-form__input.product-form__quantity").parentNode.insertBefore(i,document.querySelector(".product-form__input.product-form__quantity")),void o(i);if(865==Shopify.theme.theme_store_id)return document.querySelector('form[action*="/cart/add"] .purchase-section').prepend(i),void o(i);if(846==Shopify.theme.theme_store_id)return t.formSelector.querySelector(".product-details").insertBefore(i,t.formSelector.querySelector(".variant-group")),void o(i);if(window.__pagefly_setting__){var n=document.querySelectorAll('[data-pf-type="ProductVariant"]');if(n.length&&n.forEach((function(e){e.parentNode.insertBefore(i,e)})),document.querySelector(".vario-variant-wrapper"))return void o(i)}document.querySelector('form[action*="/cart/add"]').prepend(i),o(i)}))}))}},{key:"getCurrentOptions",value:function(){var e=this;if(this.formSelector){var t=this.formSelector.querySelector('select[name="id"], input[name="id"]');if(t){this.currentVariantId=t.value;var r=t.value,i=window.location.href.match(/\?variant=(\d+)$/);window.__pagefly_setting__&&i&&i[1]!=r&&(r=i[1]);var n=this.productData.variants.find((function(e){return e.id==r}));if(n){var o=this.createStock();Object.keys(o).forEach((function(t,r){e.currentSelected[t]=n["option".concat(r+1)]}))}}}}}]),r}(Wi),Ji=function(){function e(){Bi(this,e),this.productSelectors=[],this.optionSelectors=[],this.collectionProducts=[],this.priceRegularSelectors=".product__price--original, .product-grid-item__content > p,.price__regular .price-item--regular,.grid-product__price,.product-item--price>span>small[aria-hidden=true],.price__sale .price-item--sale,.card__price,.grid-link__meta,.product-thumbnail__header .product__price,.product__prices,.product-item__price-wrapper,.product-card__price,.product-price .theme-money,.product-thumbnail__price,.price .amount.theme-money,.product-item__price-list .price,.ProductItem__Price.Price,.pricing .price,.product-grid--price .money,#CollectionProductGrid .money",this.priceCompareSelectors=".price__sale .price-item--sale, .price__compare .price-item--regular,.product-item--price s small,.on-sale .sale-tag,.grid-product__on-sale",this.productImgSelectors=".product-card-figure, .ProductItem .ProductItem__Wrapper div.AspectRatio, .product-item__thumbnail .lazy-image, .grid-product__image-mask .grid__image-ratio, .spc__main-img .sf-image, .product-card a.product-card__image, .product-list-item-thumbnail > a,.grid-view-item__image-wrapper, .product-grid-item__image, .collection-template .product-index .prod-image .box-ratio, .collection-image--zoom-effect .grid__image,.ProductItem__ImageWrapper.ProductItem__ImageWrapper--withAlternateImage,.product-card__image-wrapper,.grid-product__image-link,.product-grid-image,.card__image-wrapper,.product__img-wrapper,.product__image-wrapper,.product-item__image-wrapper,.card--product .media, .product-thumbnail__media,.grid-product__image-mask .image-wrap,.rimage-wrapper,.product-image__wrapper,.ProductItem__ImageWrapper,.image-container-position,.card__media .media,.grid-view-item-image,.featured-collection__image",this.productImgWrapper=".product-item--vertical, .card-wrapper, .product-index, .product-grid-item, article.product-list-item",this.moneyFormat=null,this.init(),this.onSwatchClicked=this.onSwatchClicked.bind(this),this.onSwatchSelected=this.onSwatchSelected.bind(this)}return $i(e,[{key:"init",value:function(){var e=this;if(this.moneyFormat=this.getCurrentMoneyFormat(),this.productSelectors=document.querySelectorAll(".vario-collecion-product-tml"),this.optionSelectors=document.querySelectorAll(".vario-collecion-product-options-tml"),this.productSelectors.length&&this.optionSelectors.length){var t=this.productSelectors.length;this.productSelectors.forEach((function(r,i){var n=JSON.parse(r.innerHTML),o=JSON.parse(e.optionSelectors[i].innerHTML);e.appendControl(r,n,o).then((function(s){var a=new Wi(n,s,o);a.init(),e.collectionProducts.push(a),r.parentNode.addEventListener("vario-swatch-clicked",e.onSwatchClicked),r.parentNode.addEventListener("vario-swatch-selected",e.onSwatchSelected),i!==t-1||e.isMobile()||e.generateTooltip(),e.doSelectOnInit(o,a)}))}))}}},{key:"isMobile",value:function(){var e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(e=!0),e}},{key:"generateTooltip",value:function(){var e=document.querySelectorAll(".vario-variant[data-v-tooltip]");e&&e.forEach((function(e){var t=document.createElement("span");if("name"===varioCustomizer.swatches.hover_effect){t.classList.add("vario-variant-tip");t.appendChild(function(e){return document.createTextNode(e)}(e.getAttribute("data-value")))}else if("zoom"===varioCustomizer.swatches.hover_effect){t.classList.add("vario-variant-tip"),e.classList.add("vario-variant-zoom-tip");t.appendChild(function(e){return document.createTextNode(e)}(e.getAttribute("data-value")))}else if("image"===varioCustomizer.swatches.hover_effect){if(e.querySelector(".swatch-color")){t.classList.add("vario-variant-tip");t.appendChild(function(e){return document.createTextNode(e)}(e.getAttribute("data-value")))}else{t.classList.add("vario-variant-img-tip");var r=e.querySelector(".swatch-image");if(r){var i=r.style.backgroundImage,n=/\([\s\S]*\)/.exec(i)[0].replaceAll(/_50x|_120x|_360x|\(|\)|\"/gi,"");if(n){var o=document.createElement("img");o.width=150,o.height=150,o.alt="swatch image",o.src=n,t.appendChild(o)}var s=document.createElement("span");s.innerText=e.getAttribute("data-value"),t.appendChild(s)}}}document.body.appendChild(t);var a=8;"zoom"===varioCustomizer.swatches.hover_effect&&(a=14);var c=fe(e,t,{modifiers:[{name:"offset",options:{offset:[0,a]}}],placement:"undefined"!=typeof vario_tip_placement?vario_tip_placement:"top"});e.addEventListener("mouseenter",(function(){t.setAttribute("data-tip-show",""),c.update()})),e.addEventListener("mouseleave",(function(){t.removeAttribute("data-tip-show")}))}))}},{key:"getCurrentMoneyFormat",value:function(){var e,t,r,i,n,o,s,a,c,l,u,d,p,h,f;return null!==(e=window)&&void 0!==e&&e.moneyFormat?window.moneyFormat:null!==(t=window)&&void 0!==t&&null!==(r=t.theme)&&void 0!==r&&r.moneyFormat?theme.moneyFormat:null!==(i=window)&&void 0!==i&&null!==(n=i.theme)&&void 0!==n&&null!==(o=n.settings)&&void 0!==o&&o.moneyFormat?theme.settings.moneyFormat:null!==(s=window)&&void 0!==s&&null!==(a=s.theme)&&void 0!==a&&a.money_format?theme.money_format:null!==(c=window)&&void 0!==c&&null!==(l=c.theme)&&void 0!==l&&null!==(u=l.shop)&&void 0!==u&&u.money_format?theme.shop.money_format:null!==(d=window)&&void 0!==d&&null!==(p=d.wetheme)&&void 0!==p&&p.moneyFormat?wetheme.moneyFormat:null!==(h=window)&&void 0!==h&&null!==(f=h.StyleHatch)&&void 0!==f&&f.currencyFormat?StyleHatch.currencyFormat:window.VarioCurrencyFormat}},{key:"formatMoney",value:function(e,t){"string"==typeof e&&(e=e.replace(".",""));var r="",i=/\{\{\s*(\w+)\s*\}\}/,n=t||this.moneyFormat;function o(e,t){return void 0===e?t:e}function s(e,t,r,i){if(t=o(t,2),r=o(r,","),i=o(i,"."),isNaN(e)||null==e)return 0;var n=(e=(e/100).toFixed(t)).split(".");return n[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+r)+(n[1]?i+n[1]:"")}switch(n.match(i)[1]){case"amount":r=s(e,2);break;case"amount_no_decimals":r=s(e,0);break;case"amount_with_apostrophe_separator":r=s(e,2,"'",".");break;case"amount_with_comma_separator":r=s(e,2,".",",");break;case"amount_no_decimals_with_comma_separator":r=s(e,0,".",",");break;case"amount_with_dot_separator":r=s(e,2,",",".")}return n.replace(i,r)}},{key:"appendControl",value:function(e,t,r){var i=new DOMParser,n=document.querySelector("#vario-product-variant-template").innerHTML,o=new Fi;return o.registerFilter("img_url",(function(e,t,r){if(!e)return"";r=r||!1;var i=e.split(".").pop(),n=e.lastIndexOf(i)-1;return e.slice(0,n)+"_"+t+e.slice(n)})),new Promise((function(s,a){var c,l,u,d=o.parse(n);o.render(d,{product:t,options_with_values:r,varioSettings:window.varioSettings,page_type_collection:!(null===(c=window)||void 0===c||null===(l=c.meta)||void 0===l||null===(u=l.page)||void 0===u||!u.pageType||"collection"!=window.meta.page.pageType)}).then((function(t){var r=i.parseFromString(t,"text/html").querySelector(".vario-all-variant-wrapper");e.parentNode.insertBefore(r,e),s(r)}))}))}},{key:"onSwatchSelected",value:function(e){var t=e.detail,r=(t.selectSel,t.currentVariant),i=t.swatchInstance,n=e.target.parentNode;this.changeImage(n,r),this.changePrice(n,r,i)}},{key:"onSwatchClicked",value:function(e){var t=e.detail,r=t.ulSel,i=t.liSel,n=t.currentVariant,o=t.swatchInstance,s=e.target.parentNode;if(i.classList.contains("vario-plus-btn")){var a=i.getAttribute("data-action");if("link_product_page"==a){var c=i.getAttribute("data-handle");window.location="/products/"+c}else if("show_swatches"==a){r.querySelectorAll(".vario-variant").forEach((function(e){e.classList.contains("vario-plus-btn")?e.classList.add("vario-pl-hidden"):e.classList.contains("vario-pl-hidden")&&e.classList.remove("vario-pl-hidden")}))}}else if("undefined"!=typeof vario_variant_action&&"link_product_page"==vario_variant_action){var l=i.getAttribute("data-handle");window.location="/products/"+l}else this.changeImage(s,n),this.changePrice(s,n,o),document.querySelector("body").classList.add("vario_clicked")}},{key:"changeImgUrlSize",value:function(e,t){if(!e)return"";var r=e.split(".").pop(),i=e.lastIndexOf(r)-1;return e.slice(0,i)+"_"+t+e.slice(i)}},{key:"changeImage",value:function(e,t){var r=e.querySelector(this.productImgSelectors);if(r)r=r.querySelector("img");else{var i=e.closest(this.productImgWrapper).querySelector(this.productImgSelectors);i&&(r=i.querySelector("img"))}r&&null!=t&&t.featured_image&&(r.dataset.srcset=this.changeImgUrlSize(t.featured_image.src,varioCustomizer.collection.image_size+"x"),r.src=this.changeImgUrlSize(t.featured_image.src,varioCustomizer.collection.image_size+"x"),r.srcset=this.changeImgUrlSize(t.featured_image.src,varioCustomizer.collection.image_size+"x"))}},{key:"changePrice",value:function(e,t,r){var i=e.querySelector(this.priceRegularSelectors),n=e.querySelectorAll(this.priceCompareSelectors);t?(i&&(i.innerHTML=this.formatMoney(t.price)),n.length&&n.forEach((function(e){e&&(e.style.display="none")}))):Object.keys(r.currentSelected).length===r.optionWithValues.length&&i&&(i.innerHTML="Unavailable")}},{key:"doSelectOnInit",value:function(e,t){e.forEach((function(e){var r;null!==(r=varioSettings[e.name])&&void 0!==r&&r.display_on_collection||t.availableVariants.length&&(t.doSelect(e.name,t.availableVariants[0][e.name]),t.disableSwatch())}))}}]),e}();Hi=function(){var e=window.meta.page.pageType;if("collection"===e)885===Shopify.theme.theme_store_id&&document.body.classList.add("vario-body"),window.VarioCollection=new Ji;else if("product"===e){var t=1;("undefined"!=typeof wetheme||"undefined"!=typeof Shopify&&"aimer-life.myshopify.com"==Shopify.shop)&&(t=200),setTimeout((function(){window.VarioProduct=new Ui,window.VarioProduct.init()}),t)}},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?Hi():document.addEventListener("DOMContentLoaded",Hi)})();